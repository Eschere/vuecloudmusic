/* 歌单内歌曲列表 */
const Router = require('koa-router')
const url = require('url')
const {requestData} = require('../utils')

const playlist = new Router()

playlist.get('/playlist', async (ctx) => {
  // callback来自客户端
  const query = url.parse(ctx.url, true).query
  const callback = query.callback
  const dissid = query.dissid
  // 设置请求真实服务器的参数
  const options = {
    hostname: 'c.y.qq.com',
    path: `/qzone/fcg-bin/fcg_ucc_getcdinfo_byids_cp.fcg?type=1&json=1&utf8=1&onlysong=0&disstid=${dissid}&format=jsonp&g_tk=5381&jsonpCallback=${callback}&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0`,
    headers: {
      'referer': `https://y.qq.com/n/yqq/playlist/${dissid}.html`,
      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'
    }
  }

  // ctx.body = await requestData(options)
  ctx.body = `playlistinfoCallback({"code":0,"subcode":0,"accessed_plaza_cache":1,"accessed_favbase":0,"login":"on**","cdnum":1,"cdlist":[{"disstid":"4171011468","coveradurl":"","dissid":4171011,"login":"on**","uin":"ow6F7Kvioenion**","encrypt_uin":"ow6F7Kvioenion**","owndir":0,"dissname":"90后韩国说唱新生代","logo":"http://p.qpic.cn/music_cover/rTTmm5kYwyYzDb9vVF6KsQpdibUSp6M55WChCMosTxb64iaQerOfqKrw/300?n=1","pic_mid":"","album_pic_mid":"","pic_dpi":300,"isAd":0,"desc":"入坑了韩国SMTM系列，一路以来认识了一些韩国的Rapper们，真的被他们帅到了！想着把他们介绍给更多的人，特此整理了这个主题歌单。这里收集的是韩国的90后Rapper们，欢迎评论区留言补充哦！<br>同样是90后，为何你们这么优秀？！","ctime":1529380594,"mtime":0,"headurl":"http://thirdqq.qlogo.cn/g?b=sdk&k=d3ibib3Ioy2PiboA5Fa7W70FA&s=140&t=1511254070","ifpicurl":"https://y.gtimg.cn/music/common/upload/t_cm3_photo_publish/114042.png","nick":"winner","nickname":"winner","type":2,"singerid":0,"singermid":"","isvip":1,"isdj":0,"tags":[{"id":153,"name":"嘻哈","pid":153},{"id":168,"name":"韩语","pid":168}],"songnum":32,"songids":"203157552,212442877,213968287,203191594,108439498,213856877,208891746,212928796,213226312,212051674,105908770,213226512,103362827,214168073,203695433,214123521,213893394,213415402,214094080,214049445,212892016,213781334,213315093,212900936,201622226,204497446,213379282,104883542,201291105,214015704,213879762,203796929","songtypes":"13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13","total_song_num":32,"song_begin":0,"cur_song_num":32,"songlist":[{"albumdesc":"","albumid":2154709,"albummid":"0040Z1El30gtpD","albumname":"ONE DAY (一天)","alertid":100002,"belongCD":2,"cdIdx":0,"interval":185,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":977329,"mid":"002awgGc411xbT","name":"원 (郑帝元)"}],"size128":2976073,"size320":7439877,"size5_1":0,"sizeape":22912436,"sizeflac":22956132,"sizeogg":4606982,"songid":203157552,"songmid":"002H8PeZ0F9bfF","songname":"heyahe (해야해)","songorig":"heyahe","songtype":0,"strMediaMid":"002H8PeZ0F9bfF","stream":9,"switch":636675,"type":0,"vid":"x0024fghrmj"},{"albumdesc":"","albumid":3768536,"albummid":"003nHW7c2bDWNS","albumname":"Champion (Remix)","alertid":23,"belongCD":1,"cdIdx":0,"interval":210,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":4868,"mid":"003CKb192ggBqi","name":"Fall Out Boy"},{"id":950720,"mid":"004X9ICO2EE1kv","name":"랩몬스터 (Rap Monster)"}],"size128":3366491,"size320":8415856,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":4980232,"songid":212442877,"songmid":"000jgTZ42hqD2w","songname":"Champion (Remix)","songorig":"Champion","songtype":0,"strMediaMid":"003io1MZ4LyEEp","stream":0,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4053289,"albummid":"003p1PRS0EWnoT","albumname":"Bliss","alertid":100002,"belongCD":1,"cdIdx":0,"interval":230,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":21073,"mid":"001WdVFh1ezcGH","name":"도끼 (Dok2)"},{"id":1120094,"mid":"003AekJa1MQABq","name":"SUMIN (수민)"}],"size128":3694959,"size320":9236717,"size5_1":0,"sizeape":25173638,"sizeflac":25228717,"sizeogg":5476901,"songid":213968287,"songmid":"004fLaRr0RKZ7f","songname":"Bliss (Feat. SUMIN)","songorig":"Bliss (Feat. SUMIN)","songtype":0,"strMediaMid":"000qW3hh0DDavQ","stream":9,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":2157745,"albummid":"000PBQ4t1NVgh3","albumname":"TELEVISION","alertid":100002,"belongCD":1,"cdIdx":0,"interval":176,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":172967,"mid":"00363cFe00LRQD","name":"지코 (Zico)"}],"size128":2821092,"size320":7051564,"size5_1":0,"sizeape":19816547,"sizeflac":19684541,"sizeogg":4222269,"songid":203191594,"songmid":"002IroIC0loQoj","songname":"천재 (Behind the scene) (天才)","songorig":"천재 (Behind the scene)","songtype":0,"strMediaMid":"002IroIC0loQoj","stream":5,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":1597642,"albummid":"0029LVg01LoOGs","albumname":"The MOBB","alertid":100002,"belongCD":1,"cdIdx":0,"interval":199,"isonly":1,"label":"4611686018431583240","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":183200,"mid":"000FWvLC2alyWL","name":"MINO (宋旻浩)"}],"size128":3190490,"size320":7975914,"size5_1":0,"sizeape":24372942,"sizeflac":24503913,"sizeogg":4891116,"songid":108439498,"songmid":"003vnGgg22gAP7","songname":"BODY (몸)","songorig":"BODY","songtype":0,"strMediaMid":"003vnGgg22gAP7","stream":2,"switch":636675,"type":0,"vid":"l0021gs5lg1"},{"albumdesc":"","albumid":4034381,"albummid":"001byeD71gHmVi","albumname":"SUITS","alertid":100002,"belongCD":1,"cdIdx":0,"interval":206,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1008576,"mid":"004YIUnx3nwrRf","name":"비와이 (BewhY)"}],"size128":3311278,"size320":8277887,"size5_1":0,"sizeape":46617939,"sizeflac":46425332,"sizeogg":5023270,"songid":213856877,"songmid":"003sBJKG32ZnTE","songname":"SUIT UP (穿上制服)","songorig":"SUIT UP","songtype":0,"strMediaMid":"003sBJKG32ZnTE","stream":1,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":2856105,"albummid":"004Z3yWY1zoi4V","albumname":"LOVE AND FALL (Japanese Ver.)","alertid":0,"belongCD":1,"cdIdx":0,"interval":210,"isonly":0,"label":"0","msgid":3,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":0,"payinfo":0,"payplay":0,"paytrackmouth":0,"paytrackprice":0,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":202067,"mid":"004c3ous1RfumV","name":"BOBBY (金知元)"}],"size128":3362745,"size320":8406468,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":4927571,"songid":208891746,"songmid":"000325Wz0pJH5B","songname":"I LOVE YOU (JPN Ver.)","songorig":"I LOVE YOU","songtype":0,"strMediaMid":"003PbV9524LwZA","stream":5,"switch":65537,"type":0,"vid":"r0025rj0d34"},{"albumdesc":"","albumid":3891230,"albummid":"003XJDGh4PzJVB","albumname":"Return","alertid":100002,"belongCD":3,"cdIdx":0,"interval":206,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":182299,"mid":"001sTBhg1bfoks","name":"B.I (金韩彬)"}],"size128":3312160,"size320":8280023,"size5_1":0,"sizeape":24850422,"sizeflac":24854105,"sizeogg":4974016,"songid":212928796,"songmid":"003py6hi1iRexp","songname":"ONE AND ONLY (돗대)","songorig":"ONE AND ONLY","songtype":0,"strMediaMid":"003py6hi1iRexp","stream":10,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":3937789,"albummid":"000D5A9O3N2I3Y","albumname":"28 IDENTITY","alertid":0,"belongCD":1,"cdIdx":0,"interval":198,"isonly":0,"label":"0","msgid":3,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":0,"payinfo":0,"payplay":0,"paytrackmouth":0,"paytrackprice":0,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":169842,"mid":"004TWMUM1aBXc6","name":"치타 (CHEETAH)"}],"size128":3183383,"size320":7958149,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":4638706,"songid":213226312,"songmid":"000vF5jK0c5wvZ","songname":"PS","songorig":"PS","songtype":0,"strMediaMid":"000vF5jK0c5wvZ","stream":0,"switch":65537,"type":0,"vid":""},{"albumdesc":"","albumid":3324063,"albummid":"003snley4EgI6s","albumname":"Lip & Hip","alertid":100002,"belongCD":1,"cdIdx":0,"interval":209,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":10415,"mid":"0040tgjy2qm5bG","name":"현아 (泫雅)"}],"size128":3357270,"size320":8392842,"size5_1":0,"sizeape":27989851,"sizeflac":28079344,"sizeogg":4978411,"songid":212051674,"songmid":"000f1Z5C01IAe8","songname":"Lip & Hip","songorig":"Lip & Hip","songtype":0,"strMediaMid":"000f1Z5C01IAe8","stream":3,"switch":636675,"type":0,"vid":"e0025ustnrd"},{"albumdesc":"","albumid":1325937,"albummid":"001e4j9s3E2q9c","albumname":"조금만 더 방황하고 (再多徘徊一会)","alertid":100002,"belongCD":1,"cdIdx":0,"interval":221,"isonly":1,"label":"4611686018427388936","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":946540,"mid":"002aMjMG1OxMB5","name":"헤이즈 (Heize)"},{"id":25644,"mid":"000dhNwo1oP6CZ","name":"크루셜스타 (Crucial Star)"}],"size128":3552039,"size320":8879206,"size5_1":0,"sizeape":23225195,"sizeflac":23365734,"sizeogg":4740658,"songid":105908770,"songmid":"001XX96F08R4an","songname":"조금만 더 방황하고 (再多徘徊一会)","songorig":"조금만 더 방황하고","songtype":0,"strMediaMid":"001EILQu3a6KrG","stream":7,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":3937826,"albummid":"003cpaWJ3sbFZg","albumname":"아이들 쏭 (孩子们的歌)","alertid":0,"belongCD":1,"cdIdx":0,"interval":188,"isonly":0,"label":"0","msgid":3,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":0,"payinfo":0,"payplay":0,"paytrackmouth":0,"paytrackprice":0,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1220018,"mid":"001NaqB10BP4SB","name":"전소연 (全昭妍)"}],"size128":3017055,"size320":7542299,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":4647988,"songid":213226512,"songmid":"0020uAvD0iccev","songname":"아이들 쏭 (Idle Song) (孩子们的歌)","songorig":"아이들 쏭 (Idle Song)","songtype":0,"strMediaMid":"0020uAvD0iccev","stream":0,"switch":65537,"type":0,"vid":""},{"albumdesc":"","albumid":1080107,"albummid":"00318egP2RnbNc","albumname":"A+","alertid":2,"belongCD":3,"cdIdx":0,"interval":196,"isonly":1,"label":"4611686018435843080","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":10415,"mid":"0040tgjy2qm5bG","name":"현아 (泫雅)"},{"id":201757,"mid":"002UAk7D1f9Ix9","name":"육지담 (陆智谭)"}],"size128":3149954,"size320":7874565,"size5_1":0,"sizeape":25286179,"sizeflac":25494306,"sizeogg":4977637,"songid":103362827,"songmid":"0046Mrt10ouZHK","songname":"얼음 땡 (Ice Ice) (冰块)","songorig":"얼음 땡 (Ice Ice)","songtype":0,"strMediaMid":"0046Mrt10ouZHK","stream":7,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4093567,"albummid":"0012A1fj3qaHmd","albumname":"HUE. 休","alertid":100002,"belongCD":1,"cdIdx":0,"interval":218,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1179727,"mid":"003ICMiV1C3y2O","name":"킬라그램 (Killah Gramz)"},{"id":203897,"mid":"003QqDNw4YLZc5","name":"키썸 (Kisum)"},{"id":173052,"mid":"001HqVFN2kEFbM","name":"던밀스 (Don Mills)"}],"size128":3492675,"size320":8730952,"size5_1":0,"sizeape":27482888,"sizeflac":27606971,"sizeogg":5458918,"songid":214168073,"songmid":"002meLf925ZdV5","songname":"ICEBOX","songorig":"ICEBOX","songtype":0,"strMediaMid":"0043QJSu2TpmK9","stream":7,"switch":636675,"type":0,"vid":"v0026dy4z6j"},{"albumdesc":"","albumid":2215865,"albummid":"002QXnOp0PwN6W","albumname":"감성 EP (感性 EP)","alertid":100002,"belongCD":1,"cdIdx":0,"interval":245,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":91418,"mid":"000kKW9M3mqTdS","name":"산체스 (Sanchez)"}],"size128":3928598,"size320":9821196,"size5_1":0,"sizeape":29208894,"sizeflac":29105501,"sizeogg":5750481,"songid":203695433,"songmid":"004PQBEW0ECfUE","songname":"티가 나 (Blush)","songorig":"티가 나","songtype":0,"strMediaMid":"0004ziTa44P2id","stream":5,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4084389,"albummid":"0022UgfD34QjJn","albumname":"벼락부자애들 (暴发户二世)","alertid":100002,"belongCD":1,"cdIdx":0,"interval":187,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1009889,"mid":"003yDOkz2Zot82","name":"SUPERBEE (슈퍼비)"},{"id":1998256,"mid":"0005puNe1CPiQN","name":"TWLV"}],"size128":3008264,"size320":7520342,"size5_1":0,"sizeape":42557892,"sizeflac":42325129,"sizeogg":4812914,"songid":214123521,"songmid":"0010fw6S1GImyE","songname":"신한은행 (新韩银行)","songorig":"신한은행","songtype":0,"strMediaMid":"0010fw6S1GImyE","stream":9,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4040094,"albummid":"0006Lfzb1KEmMM","albumname":"What Time Is It Now?","alertid":100002,"belongCD":1,"cdIdx":0,"interval":223,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1057002,"mid":"000LRI5D1QrOpk","name":"해쉬 스완 (Hash Swan)"}],"size128":3581340,"size320":8952428,"size5_1":0,"sizeape":25171659,"sizeflac":25198415,"sizeogg":6237416,"songid":213893394,"songmid":"0014fFfp2rinv1","songname":"What Time Is It Now?","songorig":"What Time Is It Now?","songtype":0,"strMediaMid":"0038b06f3zoiNx","stream":0,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":3968235,"albummid":"000Wk1qg4AgSEN","albumname":"So Fine","alertid":100002,"belongCD":1,"cdIdx":0,"interval":221,"isonly":0,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":36156,"mid":"0041NgtT4aDztX","name":"심스 (Sims)"},{"id":1557232,"mid":"003Qoxqw1BSvrY","name":"Wavy"}],"size128":3540740,"size320":8851423,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":5183426,"songid":213415402,"songmid":"003bNlFE3HVKwA","songname":"So Fine (如此欢畅)","songorig":"So Fine","songtype":0,"strMediaMid":"003bNlFE3HVKwA","stream":0,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4075184,"albummid":"000U47Hd3zBRhc","albumname":"식구 (LA FAMILIA) (家人 (LA FAMILIA))","alertid":100002,"belongCD":1,"cdIdx":0,"interval":187,"isonly":0,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1262420,"mid":"004aN7NF4WaFIP","name":"Junoflo (주노플로)"}],"size128":3008720,"size320":7521425,"size5_1":0,"sizeape":20231103,"sizeflac":20363047,"sizeogg":4452128,"songid":214094080,"songmid":"003ygK1F3fHS0X","songname":"식구 (LA FAMILIA) (家人)","songorig":"식구 (LA FAMILIA)","songtype":0,"strMediaMid":"003ygK1F3fHS0X","stream":4,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4066601,"albummid":"002pwdSS2KbBn5","albumname":"Cypherpath","alertid":100002,"belongCD":1,"cdIdx":0,"interval":237,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":61707,"mid":"004Dr4tm35TiAF","name":"올티 (Olltii)"},{"id":36269,"mid":"002mBHVn1TPLF1","name":"허클베리 피 (Huckleberry P)"},{"id":1400155,"mid":"00265L1D4b30Ro","name":"조원우 (H2ADIN)"}],"size128":3794453,"size320":9485289,"size5_1":0,"sizeape":27961904,"sizeflac":28046556,"sizeogg":5767275,"songid":214049445,"songmid":"000Hlffa0GWdjT","songname":"Cypherpath (Feat. Huckleberry P, H2ADIN)","songorig":"Cypherpath (Feat. Huckleberry P, H2ADIN)","songtype":0,"strMediaMid":"000Hlffa0GWdjT","stream":0,"switch":636675,"type":0,"vid":"o0026gupwig"},{"albumdesc":"","albumid":3885659,"albummid":"000B46S826H4WL","albumname":"Hey","alertid":100002,"belongCD":1,"cdIdx":0,"interval":174,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":950191,"mid":"003EQ6VA42xR9k","name":"지민 (智珉)"}],"size128":2792995,"size320":6982200,"size5_1":0,"sizeape":24908352,"sizeflac":25023983,"sizeogg":4437909,"songid":212892016,"songmid":"002k9xet3Vd0s8","songname":"Hey","songorig":"Hey","songtype":0,"strMediaMid":"002jDlng1pTyLd","stream":0,"switch":636675,"type":0,"vid":"s0025waki8r"},{"albumdesc":"","albumid":4023659,"albummid":"003iZAFK0SMxzh","albumname":"Alone","alertid":100002,"belongCD":1,"cdIdx":0,"interval":219,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":167071,"mid":"002gtKqR26aOHb","name":"딘딘 (DinDin)"}],"size128":3506459,"size320":8765849,"size5_1":0,"sizeape":47186646,"sizeflac":46868732,"sizeogg":4951640,"songid":213781334,"songmid":"002rgaAS3YXhjF","songname":"Alone","songorig":"Alone","songtype":0,"strMediaMid":"002rgaAS3YXhjF","stream":9,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":3951445,"albummid":"004LjL7d2pfbO6","albumname":"Big wave","alertid":100002,"belongCD":1,"cdIdx":0,"interval":223,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":161337,"mid":"001w8fj903er9k","name":"정일훈 (郑镒勋)"},{"id":941523,"mid":"000kIGFi2m5aKD","name":"임현식 (任炫植)"}],"size128":3575852,"size320":8938810,"size5_1":0,"sizeape":26197856,"sizeflac":26167766,"sizeogg":5511462,"songid":213315093,"songmid":"003PHNdo1xVes2","songname":"얘기 좀 해요 (我们谈谈)","songorig":"얘기 좀 해요","songtype":0,"strMediaMid":"000Caf2i3NWq6t","stream":5,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":3887108,"albummid":"002RjejI4LNS47","albumname":"RAVI 2nd MIXTAPE [NIRVANA]","alertid":100002,"belongCD":1,"cdIdx":0,"interval":195,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":167748,"mid":"000y4Y7Q1ZGbJd","name":"라비 (Ravi)"},{"id":951243,"mid":"0032HG4a4c7dpW","name":"식케이 (Sik-K)"}],"size128":3127854,"size320":7818704,"size5_1":0,"sizeape":22094279,"sizeflac":22237763,"sizeogg":4801600,"songid":212900936,"songmid":"002byoiy1W8txb","songname":"끓는점 (Feat. Sik-K) (沸点)","songorig":"끓는점 (Feat. Sik-K)","songtype":0,"strMediaMid":"002byoiy1W8txb","stream":8,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":1976815,"albummid":"000V0Rmc1HXkKW","albumname":"고등래퍼 FINAL (高校Rapper FINAL)","alertid":100002,"belongCD":4,"cdIdx":0,"interval":177,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1265025,"mid":"001z67i41jyW3d","name":"마크 (Mark)"},{"id":198443,"mid":"002idhIC4TUCTp","name":"슬기 (涩琪)"}],"size128":2839834,"size320":7099256,"size5_1":0,"sizeape":20063142,"sizeflac":20102792,"sizeogg":4088453,"songid":201622226,"songmid":"002jcFEp2rlcuo","songname":"두고가 (Drop) (离我而去)","songorig":"두고가 (Drop)","songtype":0,"strMediaMid":"004KZBne1UGv2w","stream":5,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":8623,"albummid":"001ZaCQY2OxVMg","albumname":"   ","alertid":11,"belongCD":1,"cdIdx":0,"interval":153,"isonly":0,"label":"0","msgid":0,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":0,"payinfo":0,"payplay":0,"paytrackmouth":0,"paytrackprice":0,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":157719,"mid":"002hgUnS3UKlJC","name":"FeelDog (필독)"},{"id":1386090,"mid":"003X6dYc2jtEnB","name":"래환 (金来桓)"}],"size128":2449862,"size320":0,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":0,"songid":204497446,"songmid":"003PJINt0yE4vG","songname":"우주를 줄게 (给你宇宙)","songorig":"우주를 줄게","songtype":0,"strMediaMid":"001VNPTo0Yn6EX","stream":3,"switch":81683,"type":0,"vid":""},{"albumdesc":"","albumid":3962466,"albummid":"0038axeF1IA5e6","albumname":"너를 사랑하진 않아 (I Don't Think I Love You)","alertid":100002,"belongCD":2,"cdIdx":0,"interval":231,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1244629,"mid":"00340neC10veC2","name":"자이언트핑크 (GIANTPINK)"},{"id":19873,"mid":"003TeM5b1IrVck","name":"정인 (郑仁)"}],"size128":3706286,"size320":9265352,"size5_1":0,"sizeape":26765859,"sizeflac":26931016,"sizeogg":5274804,"songid":213379282,"songmid":"004Q6EVf0W4gmz","songname":"잘 지내 (好好过)","songorig":"잘 지내","songtype":0,"strMediaMid":"004Q6EVf0W4gmz","stream":6,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":1192282,"albummid":"002kKUHh4fXpkv","albumname":"LOVE TALK","alertid":2,"belongCD":1,"cdIdx":0,"interval":221,"isonly":1,"label":"4611686018435777544","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":203897,"mid":"003QqDNw4YLZc5","name":"키썸 (Kisum)"},{"id":203792,"mid":"001aAX6V1QArFZ","name":"화사 (华莎)"}],"size128":3543674,"size320":8858861,"size5_1":0,"sizeape":25544776,"sizeflac":26167862,"sizeogg":5125806,"songid":104883542,"songmid":"003f8LIt4FvFAH","songname":"LOVE TALK","songorig":"LOVE TALK","songtype":0,"strMediaMid":"003f8LIt4FvFAH","stream":2,"switch":636675,"type":0,"vid":"p00182aghpz"},{"albumdesc":"","albumid":1924543,"albummid":"003dHJZZ2HrhrH","albumname":"Q","alertid":0,"belongCD":1,"cdIdx":0,"interval":183,"isonly":0,"label":"0","msgid":3,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":0,"payinfo":0,"payplay":0,"paytrackmouth":0,"paytrackprice":0,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":32149,"mid":"000kEKNz1wxtOM","name":"방용국 (方容国)"}],"size128":2941364,"size320":0,"size5_1":0,"sizeape":0,"sizeflac":0,"sizeogg":0,"songid":201291105,"songmid":"0042RqWp1gf8EP","songname":"Q","songorig":"Q","songtype":0,"strMediaMid":"0042RqWp1gf8EP","stream":0,"switch":65537,"type":0,"vid":""},{"albumdesc":"Prod. By dnss","albumid":4060438,"albummid":"000zPjM833sUeo","albumname":"3곡 (3曲)","alertid":100002,"belongCD":1,"cdIdx":0,"interval":227,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":57575,"mid":"000Q7wkS323U2F","name":"기리보이 (Giriboy)"},{"id":1454822,"mid":"003MnxEx1mhbTT","name":"따마 (Thama)"}],"size128":3637302,"size320":9092924,"size5_1":0,"sizeape":49547243,"sizeflac":49594003,"sizeogg":5533876,"songid":214015704,"songmid":"003HMkWf0nl4Uh","songname":"빈집 (Empty House)","songorig":"빈집","songtype":0,"strMediaMid":"003HMkWf0nl4Uh","stream":8,"switch":636675,"type":0,"vid":""},{"albumdesc":"","albumid":4038198,"albummid":"004JsGte24eosh","albumname":"DON'T YOU LOVE ME","alertid":100002,"belongCD":1,"cdIdx":0,"interval":182,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":965828,"mid":"003TPSnk4L6vNw","name":"MC그리 (MC Gree)"}],"size128":2921368,"size320":7302732,"size5_1":0,"sizeape":37881364,"sizeflac":37874805,"sizeogg":3972284,"songid":213879762,"songmid":"0025SWBM29tKa0","songname":"DON'T YOU LOVE ME","songorig":"DON'T YOU LOVE ME","songtype":0,"strMediaMid":"0025SWBM29tKa0","stream":0,"switch":636675,"type":0,"vid":"g00266jpesl"},{"albumdesc":"《犯罪都市》电影插曲","albumid":2230481,"albummid":"000ADwH62YylEu","albumname":"범죄도시 OST (The outlaws OST)","alertid":100002,"belongCD":1,"cdIdx":0,"interval":183,"isonly":1,"label":"0","msgid":14,"pay":{"payalbum":0,"payalbumprice":0,"paydownload":1,"payinfo":1,"payplay":0,"paytrackmouth":1,"paytrackprice":200,"timefree":0},"preview":{"trybegin":0,"tryend":0,"trysize":0},"rate":0,"singer":[{"id":1179727,"mid":"003ICMiV1C3y2O","name":"킬라그램 (Killah Gramz)"}],"size128":2936825,"size320":7341524,"size5_1":0,"sizeape":21412366,"sizeflac":21479427,"sizeogg":4162939,"songid":203796929,"songmid":"0025l16700CpPn","songname":"Dirty Dog","songorig":"Dirty Dog","songtype":0,"strMediaMid":"0025l16700CpPn","stream":1,"switch":636675,"type":0,"vid":"y0024d6jtur"}],"visitnum":772915,"cmtnum":0,"buynum":0,"scoreavage":"0.0","scoreusercount":0}],"realcdnum":1})`
})

playlist.get('/playlistcommentnum', async (ctx) => {
  // callback来自客户端
  const query = url.parse(ctx.url, true).query
  const callback = query.callback
  const topic = query.topic
  // 设置请求真实服务器的参数
  const options = {
    hostname: 'c.y.qq.com',
    path: `/base/fcgi-bin/fcg_global_comment_h5.fcg?g_tk=5381&jsonpCallback=${callback}&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=GB2312&notice=0&platform=yqq&needNewCode=0&cid=205360772&reqtype=1&biztype=3&topid=${topic}&cmd=4&needmusiccrit=0&pagenum=0&pagesize=0&lasthotcommentid=&callback=${callback}&domain=qq.com`,
    headers: {
      'referer': `https://y.qq.com/n/yqq/playlist/${topic}.html`,
      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'
    }
  }
  ctx.body = await requestData(options)
})

playlist.get('/favNum', async (ctx) => {
  // callback来自客户端
  const query = url.parse(ctx.url, true).query
  const callback = query.callback
  const dissid = query.dissid
  // 设置请求真实服务器的参数
  const options = {
    hostname: 'c.y.qq.com',
    path: `/3gmusic/fcgi-bin/3g_dir_order_uinlist?g_tk=5381&jsonpCallback=getFavNum4207612873&loginUin=0&hostUin=0&format=jsonp&inCharset=utf8&outCharset=utf-8&notice=0&platform=yqq&needNewCode=0&cid=322&nocompress=1&disstid=${dissid}&callback=${callback}`,
    headers: {
      'referer': `https://y.qq.com/n/yqq/playlist/${dissid}.html`,
      'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.99 Safari/537.36'
    }
  }
  ctx.body = await requestData(options)
})
module.exports = playlist
