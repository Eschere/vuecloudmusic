{"version":3,"sources":["webpack:///src/components/Player/cd.vue","webpack:///./src/components/Player/cd.vue?f087","webpack:///./src/components/Player/cd.vue","webpack:///src/components/Player/lyric.vue","webpack:///./src/components/Player/lyric.vue?5e1a","webpack:///./src/components/Player/lyric.vue","webpack:///src/components/Player/Player.vue","webpack:///./src/components/Player/Player.vue?533e","webpack:///./src/components/Player/Player.vue"],"names":["cd","props","data","pnncd","panningStyle","protecting","doingChangeSong","stopAnimation","commentnum","computed","extends_default","Object","vuex_esm","methods","togglePage","e","srcEvent","stopPropagation","stopImmediatePropagation","preventDefault","this","$emit","panHandler","_this","transform","deltaX","isFinal","totalWidth","document","documentElement","clientWidth","changeSong","type","beforeChange","setTimeout","transition","swipeHandler","_this2","enter","el","done","style","visibility","leave","display","created","songIndex","currentSong","indexInPlaylist","keyIndex","playOrder","indexOf","prev","length","next","mark","Date","now","Math","random","index","deactivated","activated","watch","currentSong.src","_this3","currentSong.indexInPlaylist","val","cdMoveDirection","pop","unshift","shift","push","changeCdMoveDirection","currentSong.songid","_this4","jsonp_default","currentServer","url","name","floor","err","console","log","num","batch_commenttotal","commenttotal","Player_cd","render","_vm","_h","$createElement","_c","_self","staticClass","on","tap","pan","swipe","class","running","_v","attrs","tag","_l","item","key","animation","directives","rawName","value","playlist","albummid","expression","arg","shownum","_s","staticRenderFns","components_Player_cd","__webpack_require__","normalizeComponent","ssrContext","lyric_scroll","lyric","tiemr","lyricTrans","lyricArray","lyricLoading","boxHeight","lineData","readyForChange","scrollByUser","willActiveIndex","lyricChanged","activeIndex","currentTime","time","active","findIndex","arr","text","willActiveTime","utils","changeVolumeHandler","volumeRect","$refs","volume","getBoundingClientRect","volumeBarWidth","width","volumeBarOffset","left","x","offset","center","round","changeVolume","lyricChanger","setCurrentTime","requestLyric","cb","songmid","trans","$nextTick","updateLineData","line","map","offsetTop","height","clientHeight","mounted","window","IScroll","lyricArea","$el","probeType","click","willIndex","willCenter","y","abs","timer","clearTimeout","scrollTo","onresize","refresh","scrollDistance","currentSong.songmid","_this5","Player_lyric","ref","padding","refInFor","color","domProps","innerHTML","_e","Player","components","lyric_normalizeComponent","showPlaylist","pageBg","showing","title","timeSetting","progressBarWidth","progressBarOffset","durationStr","duration","currentTimeStr","progressWidth","progress","loadProgress","loadedTime","loopTypeClass","loopType","scrollRound","scroll","end","maxScrollX","playlistOn","changeProgressPan","changeProgressTap","img","Image","src","albumcover","onload","firstTitle","scrollX","scrollY","bounce","disableMouse","disablePointer","disableTouch","bounceEasing","progressRect","playlist.length","$route","path","$router","go","Player_Player","backgroundImage","$event","songname","singer","togglepage","loading","dataLoading","toggleLoopType","changePlayState","close","Player_Component","Player_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/1.9a6c47a21f31adbb0189.js","sourcesContent":["<template>\r\n<div class=\"cd-page\">\r\n  <v-touch\r\n    class=\"cd-main\"\r\n    @tap=\"togglePage\"\r\n    @pan=\"panHandler\"\r\n    @swipe=\"swipeHandler\"\r\n  >\r\n    <!-- 磁头 -->\r\n    <div class=\"cd-head\">\r\n      <div class=\"cd-heads\" :class=\"(running && !doingChangeSong) ? '': 'pause'\">\r\n      </div>\r\n    </div>\r\n    <!-- cd封面 -->\r\n    <div class=\"cd-cover-box\"></div>\r\n      <transition-group\r\n        tag=\"div\"\r\n        name=\"mini-order\"\r\n        class=\"cd-cover-list\"\r\n        :style=\"panningStyle\"\r\n        @enter=\"enter\"\r\n        @leave=\"leave\"\r\n      >\r\n        <div\r\n          v-for=\"(item,index) in pnncd\"\r\n          :key=\"item.mark\"\r\n          class=\"cd-cover-item\"\r\n        >\r\n          <div\r\n            class=\"cd-cover-bg\"\r\n            :class=\"(running && !doingChangeSong && index === 1) ? 'running' : ''\"\r\n            :style=\"{animation: stopAnimation}\"\r\n          >\r\n            <div\r\n              class=\"cd-cover\"\r\n              v-src:before-cover=\"'https://y.gtimg.cn/music/photo_new/T002R300x300M000'+playlist[item.index].albummid+'.jpg?max_age=2592000'\"\r\n            >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </transition-group>\r\n  </v-touch>\r\n  <div class=\"operation-group\">\r\n    <span class=\"iconfont icon-heart\" v-touch-light></span>\r\n    <span class=\"iconfont icon-download\" v-touch-light></span>\r\n    <span class=\"comment\"  v-touch-light>\r\n      <span class=\"iconfont icon-comment\" :class=\"{shownum: commentnum}\"></span>\r\n      <span class=\"comment-num\">{{commentnum}}</span>\r\n    </span>\r\n    <span class=\"iconfont icon-more-item\" v-touch-light></span>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport {mapState, mapGetters, mapActions, mapMutations} from 'vuex'\r\nimport jsonp from 'jsonp'\r\n\r\nexport default {\r\n  props: ['direction'],\r\n  data () {\r\n    return {\r\n      pnncd: [], // 长度为3，表示上一首· 正在播放· 下一首 歌曲的位置\r\n      panningStyle: '', // 拖动距离\r\n      protecting: '', // 切歌操作正在受限制\r\n      doingChangeSong: '', // 正在进行切歌操作\r\n      stopAnimation: '', // 完全停止动画 在切歌后短暂开启\r\n      commentnum: '' // 评论数量\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['running', 'currentSong', 'playlist', 'cdMoveDirection']),\r\n    ...mapGetters('player', ['playOrder']),\r\n    ...mapGetters('config', ['currentServer'])\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['changeCdMoveDirection']),\r\n    ...mapActions('player', ['changeSong']),\r\n    togglePage (e) {\r\n      e.srcEvent.stopPropagation()\r\n      e.srcEvent.stopImmediatePropagation()\r\n      e.preventDefault()\r\n      this.$emit('togglepage')\r\n    },\r\n    panHandler (e) {\r\n      // 保护中的动画无法操作\r\n      if (this.protecting) {\r\n        return false\r\n      }\r\n      this.doingChangeSong = true\r\n\r\n      this.panningStyle = {transform: 'translate3d(-100vw, 0, 0) translate3d(' + e.deltaX + 'px,0,0)'}\r\n\r\n      if (e.isFinal) {\r\n        // 动画间隔\r\n        let duration = 200\r\n\r\n        let totalWidth = document.documentElement.clientWidth\r\n        if (e.deltaX / totalWidth > 0.45) {\r\n          this.protecting = true\r\n          // 上一首\r\n          this.changeSong({\r\n            type: 'prev',\r\n            beforeChange: () => {\r\n              // 动画完成后取消保护，恢复动画设置\r\n              setTimeout(() => {\r\n                this.protecting = false\r\n                this.doingChangeSong = false\r\n              }, duration)\r\n              this.panningStyle = {transition: 'all .2s ease-out'}\r\n            }\r\n          })\r\n        } else if (e.deltaX / totalWidth < -0.45) {\r\n          this.protecting = true\r\n          // 下一首\r\n          this.changeSong({\r\n            type: 'next',\r\n            beforeChange: () => {\r\n              setTimeout(() => {\r\n                this.protecting = false\r\n                this.doingChangeSong = false\r\n              }, duration)\r\n              this.panningStyle = {transition: 'all .2s ease-out'}\r\n            }\r\n          })\r\n        } else {\r\n          // 未触发切歌\r\n          this.panningStyle = {transition: 'all .2s ease-out'}\r\n          setTimeout(() => {\r\n            this.protecting = false\r\n            this.doingChangeSong = false\r\n          }, duration)\r\n        }\r\n      }\r\n    },\r\n    swipeHandler (e) {\r\n      if (this.protecting) {\r\n        return false\r\n      }\r\n      this.doingChangeSong = true\r\n      this.protecting = true\r\n      let duration = 200\r\n      if (e.deltaX > 0) {\r\n        // 上一首\r\n        this.changeSong({\r\n          type: 'prev',\r\n          beforeChange: () => {\r\n            // 动画完成后取消保护，恢复动画设置\r\n            setTimeout(() => {\r\n              this.protecting = false\r\n              this.doingChangeSong = false\r\n            }, duration)\r\n          }\r\n        })\r\n      } else if (e.deltaX < 0) {\r\n        // 表示切换方向\r\n        this.changeSong({\r\n          type: 'next',\r\n          beforeChange: () => {\r\n            // 动画完成后取消保护，恢复动画设置\r\n            setTimeout(() => {\r\n              this.protecting = false\r\n              this.doingChangeSong = false\r\n            }, duration)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    enter (el, done) {\r\n      el.style.visibility = 'hidden'\r\n      setTimeout(() => {\r\n        done()\r\n        el.style.visibility = ''\r\n      }, 200)\r\n    },\r\n    leave (el, done) {\r\n      el.style.display = 'none'\r\n      setTimeout(() => {\r\n        done()\r\n        el.style.display = ''\r\n      }, 200)\r\n    }\r\n  },\r\n  created () {\r\n    let songIndex = this.currentSong.indexInPlaylist\r\n    let keyIndex = this.playOrder.indexOf(songIndex)\r\n    let prev = keyIndex - 1 < 0 ? this.playOrder.length - 1 : keyIndex - 1\r\n    let next = keyIndex + 1 > this.playOrder.length - 1 ? 0 : keyIndex + 1\r\n    // 初始显示列表\r\n    this.pnncd = [\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: this.playOrder[prev]\r\n      },\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: songIndex\r\n      },\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: this.playOrder[next]\r\n      }\r\n    ]\r\n  },\r\n  deactivated () {\r\n    this.stopAnimation = 'none'\r\n  },\r\n  activated () {\r\n    this.stopAnimation = ''\r\n  },\r\n  watch: {\r\n    'currentSong.src' () {\r\n      setTimeout(() => {\r\n        this.stopAnimation = 'none'\r\n      }, 200)\r\n      setTimeout(() => {\r\n        this.stopAnimation = ''\r\n      }, 700)\r\n    },\r\n    'currentSong.indexInPlaylist' (val) {\r\n      this.commentnum = ''\r\n      // 当歌曲变化时，pnn列表发生相应变化\r\n      let songIndex = val\r\n      let keyIndex = this.playOrder.indexOf(songIndex)\r\n      let prev = keyIndex - 1 < 0 ? this.playOrder.length - 1 : keyIndex - 1\r\n      let next = keyIndex + 1 > this.playOrder.length - 1 ? 0 : keyIndex + 1\r\n\r\n      if (this.cdMoveDirection === 'right') {\r\n        this.pnncd.pop()\r\n        this.pnncd.unshift({\r\n          mark: Date.now() * Math.random(),\r\n          index: this.playOrder[prev]\r\n        })\r\n      } else if (this.cdMoveDirection === 'left') {\r\n        this.pnncd.shift()\r\n        this.pnncd.push({\r\n          mark: Date.now() * Math.random(),\r\n          index: this.playOrder[next]\r\n        })\r\n      } else {\r\n        this.pnncd = [\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: this.playOrder[prev]\r\n          },\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: songIndex\r\n          },\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: this.playOrder[next]\r\n          }\r\n        ]\r\n      }\r\n      this.changeCdMoveDirection('')\r\n    },\r\n    'currentSong.songid' (val) {\r\n      jsonp(this.currentServer.url + '/songcommentnum?topic=' + val, {\r\n        name: 'jsoncallback2387000247395' + Math.floor((Math.random() * 8999) + 1000)\r\n      }, (err, data) => {\r\n        if (err) {\r\n          console.log('Get SongCommentNum Failed')\r\n        } else {\r\n          let num = data.batch_commenttotal[0].commenttotal\r\n\r\n          if (num <= 999) {\r\n            this.commentnum = num\r\n          } else if (num < 10000) {\r\n            this.commentnum = '999+'\r\n          } else if (num < 100000) {\r\n            this.commentnum = '1w+'\r\n          } else if (num < 1000000) {\r\n            this.commentnum = '10w+'\r\n          } else {\r\n            this.commentnum = '100w+'\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.cd-page {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  flex-direction: column;\r\n}\r\n.cd-main {\r\n  flex: 1;\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n.cd-head {\r\n  width: 100vw;\r\n  height: 0.5px;\r\n  background-image: repeating-linear-gradient(to right,transparent,rgba(200,200,200,0.3) 30%,rgba(200,200,200,.3) 70%, transparent);\r\n  padding-bottom: (100 / 3.75 ) + vw;\r\n  background-clip: content-box;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: -(50 / 3.75 ) + vw;\r\n  .cd-heads {\r\n    margin-top: -49 / 414 * (100 / 3.75) + vw;\r\n    margin-left: (276 - 49) / 276 * (276 / 414 * (100 / 3.75)) + vw;\r\n    height: (100 / 3.75) + vw;\r\n    width: 276 / 414 * (100 / 3.75) + vw;\r\n    background: url('~@/components/common/img/cd-heads.png') no-repeat center / 100%;\r\n    transition: transform 0.4s;\r\n    transform-origin: 49 / 414 * (100 / 3.75) + vw 49 / 414 * (100 / 3.75) + vw;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n  .cd-heads.pause {\r\n    transform: rotate(-20deg);\r\n  }\r\n}\r\n.cd-cover-box {\r\n  width: 80vw;\r\n  height: 80vw;\r\n  margin: 0 10vw;\r\n  background-color: rgba(#eee, 0.1);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n}\r\n.cd-cover-list {\r\n  width: 100vw;\r\n  position: absolute;\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  // margin-left: -100vw;\r\n  transform: translate3d(-100vw, 0, 0);\r\n  .cd-cover-item {\r\n    width: 80vw;\r\n    height: 80vw;\r\n    margin: 0 10vw;\r\n    flex-shrink: 0;\r\n  }\r\n  .cd-cover-bg {\r\n    width: 80vw;\r\n    height: 80vw;\r\n    background: url(\"~@/components/common/img/cover-border.png\") no-repeat center / 100% 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    animation: coverrunning 20s linear paused infinite;\r\n    .cd-cover {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      border-radius: 50%;\r\n      width: (804 - 130 * 2) * 80 / 804 + vw;\r\n      height: (804 - 130 * 2) * 80 / 804 + vw;\r\n      border: 9 * 80 / 804 + vw solid black;\r\n      background: {\r\n        position: center;\r\n        size: 100% 100%;\r\n      }\r\n    }\r\n    .cd-cover.before-cover {\r\n      background: url('~@/components/common/img/cover-noload.png') no-repeat center / 110%;\r\n    }\r\n  }\r\n  .cd-cover-bg.running {\r\n    animation-play-state: running!important;\r\n  }\r\n}\r\n.operation-group {\r\n  width: 100vw;\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 15px 40px;\r\n  .iconfont{\r\n    font-size: 23px;\r\n    color: white;\r\n  }\r\n  .comment {\r\n    width: 23px;\r\n    height: 25px;\r\n    position: relative;\r\n    .comment-num {\r\n      color: white;\r\n      left: 65%;\r\n      bottom: 70%;\r\n      position: absolute;\r\n      font-size: 12px;\r\n      font-size: 10px;\r\n      line-height: 12px;\r\n    }\r\n  }\r\n  .icon-comment.shownum {\r\n    position: absolute;\r\n    clip-path: polygon(0 0, 60% 0, 60% 30%,100% 30% ,100% 100%, 0 100%, 0 0);\r\n  }\r\n}\r\n</style>\r\n<style>\r\n@keyframes coverrunning {\r\n  from {\r\n    transform: rotate(0)\r\n  }\r\n  to {\r\n    transform: rotate(360deg)\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/cd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cd-page\"},[_c('v-touch',{staticClass:\"cd-main\",on:{\"tap\":_vm.togglePage,\"pan\":_vm.panHandler,\"swipe\":_vm.swipeHandler}},[_c('div',{staticClass:\"cd-head\"},[_c('div',{staticClass:\"cd-heads\",class:(_vm.running && !_vm.doingChangeSong) ? '': 'pause'})]),_vm._v(\" \"),_c('div',{staticClass:\"cd-cover-box\"}),_vm._v(\" \"),_c('transition-group',{staticClass:\"cd-cover-list\",style:(_vm.panningStyle),attrs:{\"tag\":\"div\",\"name\":\"mini-order\"},on:{\"enter\":_vm.enter,\"leave\":_vm.leave}},_vm._l((_vm.pnncd),function(item,index){return _c('div',{key:item.mark,staticClass:\"cd-cover-item\"},[_c('div',{staticClass:\"cd-cover-bg\",class:(_vm.running && !_vm.doingChangeSong && index === 1) ? 'running' : '',style:({animation: _vm.stopAnimation})},[_c('div',{directives:[{name:\"src\",rawName:\"v-src:before-cover\",value:('https://y.gtimg.cn/music/photo_new/T002R300x300M000'+_vm.playlist[item.index].albummid+'.jpg?max_age=2592000'),expression:\"'https://y.gtimg.cn/music/photo_new/T002R300x300M000'+playlist[item.index].albummid+'.jpg?max_age=2592000'\",arg:\"before-cover\"}],staticClass:\"cd-cover\"})])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"operation-group\"},[_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-heart\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-download\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"comment\"},[_c('span',{staticClass:\"iconfont icon-comment\",class:{shownum: _vm.commentnum}}),_vm._v(\" \"),_c('span',{staticClass:\"comment-num\"},[_vm._v(_vm._s(_vm.commentnum))])]),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-more-item\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-61fcb2c4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/cd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-61fcb2c4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cd.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-61fcb2c4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./cd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61fcb2c4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./cd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-61fcb2c4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/cd.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"lyric-page\">\r\n    <div class=\"volume-area\">\r\n      <span class=\"iconfont icon-volume\"></span>\r\n\r\n      <v-touch\r\n        class=\"volume-box\"\r\n        @tap=\"changeVolumeHandler\"\r\n        @pan=\"changeVolumeHandler\"\r\n      >\r\n        <div ref=\"volume\" class=\"volume-bar\">\r\n          <div class=\"volume\" :style=\"{width: volume * 100 + '%'}\">\r\n            <div class=\"volume-button\"></div>\r\n          </div>\r\n        </div>\r\n      </v-touch>\r\n    </div>\r\n\r\n    <div\r\n      class=\"lyric-area\"\r\n    >\r\n      <v-touch\r\n        class=\"lyric-cursor\"\r\n        v-show=\"readyForChange\"\r\n        @tap=\"lyricChanger\"\r\n\r\n      >\r\n        <span class=\"cursor-icon\"></span>\r\n        <hr class=\"cursor-line\"/>\r\n        <span class=\"cursor-time\">{{willActiveTime}}</span>\r\n      </v-touch>\r\n\r\n      <v-touch\r\n        class=\"lyric-touch\"\r\n        @tap=\"togglePage\"\r\n        @pan=\"panHandler\"\r\n        ref=\"lyricArea\"\r\n      >\r\n        <div\r\n          class=\"lyric-box\" v-show=\"!lyricLoading\"\r\n        >\r\n          <div\r\n            class=\"lyric-content\"\r\n            :style=\"{padding: boxHeight / 2 + 'px 0'}\"\r\n          >\r\n            <div\r\n              class=\"lyric-line\"\r\n              v-for=\"(item,index) in lyricArray\"\r\n              :key=\"'lyricI'+index\"\r\n              :style=\"{color: activeIndex === index ? '#fff' : willActiveIndex === index ? '#eee':''}\"\r\n              ref=\"line\"\r\n            >\r\n              <p\r\n                class=\"lyric-origin\"\r\n                v-html=\"item.text\"\r\n              ></p>\r\n              <p\r\n                class=\"lyric-trans\"\r\n                v-if=\"item.trans\"\r\n                v-html=\"item.trans\"\r\n              ></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"lyric-loading\" v-show=\"lyricLoading\">\r\n          <span>歌词加载中...</span>\r\n        </div>\r\n      </v-touch>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapGetters, mapMutations} from 'vuex'\r\n\r\nimport jsonp from 'jsonp'\r\nimport {decodeBase64, formatTime, lrcParser} from '@/utils'\r\nlet scroll\r\nexport default {\r\n  data () {\r\n    return {\r\n      tiemr: null,\r\n      lyric: '',\r\n      lyricTrans: '',\r\n      lyricArray: [],\r\n      lyricLoading: true,\r\n      boxHeight: 0, // 歌词容器高度,\r\n      lineData: [],\r\n      readyForChange: false, // 预切换歌曲播放歌词位置\r\n      scrollByUser: false,\r\n      willActiveIndex: null,\r\n      lyricChanged: false // 在组件失活期间歌曲改变\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['volume', 'currentSong', 'currentTime']),\r\n    ...mapGetters('config', ['currentServer']),\r\n    activeIndex () {\r\n      if (this.lyricArray.length > 0) {\r\n        // 最小为0\r\n        if (this.currentTime <= this.lyricArray[0].time) {\r\n          return 0\r\n        }\r\n\r\n        let active = this.lyricArray.findIndex((item, index, arr) => {\r\n          if (index < arr.length - 1) {\r\n            return this.currentTime >= item.time && this.currentTime < arr[index + 1].time\r\n          } else {\r\n            return index\r\n          }\r\n        })\r\n\r\n        // 跳过内容为空的歌词行\r\n        return this.lyricArray[active].text === ''\r\n          ? active - 1 < 0 ? 0 : active - 1\r\n          : active\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    willActiveTime () {\r\n      if (this.lyricArray.length < 1 || this.willActiveIndex === null) {\r\n        return '00:00'\r\n      } else {\r\n        return formatTime(this.lyricArray[this.willActiveIndex].time)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['changeVolume', 'setCurrentTime']),\r\n    togglePage (e) {\r\n      this.$emit('togglepage')\r\n    },\r\n    changeVolumeHandler (e) {\r\n      let volumeRect = this.$refs.volume.getBoundingClientRect()\r\n      let volumeBarWidth = volumeRect.width\r\n      let volumeBarOffset = volumeRect.left || volumeRect.x\r\n      let offset = e.center.x - volumeBarOffset\r\n      let volume = Math.round(offset / volumeBarWidth * 100) / 100\r\n      if (volume < 0.05) {\r\n        volume = 0\r\n      } else if (volume > 0.95) {\r\n        volume = 1\r\n      }\r\n      this.changeVolume(volume)\r\n    },\r\n    panHandler () {\r\n      this.readyForChange = true\r\n      this.scrollByUser = true\r\n    },\r\n    lyricChanger () {\r\n      this.setCurrentTime(this.lyricArray[this.willActiveIndex].time)\r\n    },\r\n    requestLyric (cb) {\r\n      this.lyricLoading = true\r\n      this.scrollByUser = false\r\n      this.readyForChange = false\r\n      // 请求歌词\r\n      jsonp(this.currentServer.url + '/songlyric?songmid=' + this.currentSong.songmid, {\r\n        name: 'MusicJsonCallback_lrc'\r\n      }, (err, data) => {\r\n        if (err) {\r\n          this.lyricLoading = false\r\n          this.lyric = '无歌词'\r\n        } else {\r\n          this.lyric = decodeBase64(data.lyric)\r\n\r\n          this.lyricTrans = data.trans && decodeBase64(data.trans)\r\n\r\n          this.lyricArray = lrcParser(this.lyric, this.lyricTrans)\r\n          this.$nextTick(cb)\r\n        }\r\n      })\r\n    },\r\n    updateLineData () {\r\n      // 更新每行歌词的位置信息\r\n      this.lineData = this.$refs.line.map(item => {\r\n        let offset = item.offsetTop\r\n        let height = item.clientHeight\r\n        return {\r\n          offset,\r\n          height,\r\n          center: offset + height / 2\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.requestLyric(() => {\r\n      this.lyricLoading = false\r\n      setTimeout(() => {\r\n        this.updateLineData()\r\n\r\n        // 初始化滚动条\r\n        scroll = new window.IScroll(this.$refs.lyricArea.$el, {\r\n          probeType: 3,\r\n          click: false,\r\n          preventDefault: false\r\n        })\r\n\r\n        scroll.on('scroll', () => {\r\n          if (this.readyForChange && this.scrollByUser) {\r\n            let willIndex\r\n            // 预滚动到的歌词行中心点\r\n            let willCenter = -scroll.y + this.boxHeight / 2\r\n            // 根据预期滚动到的歌词行中心 和 全部歌词行中心 计算应该滚动到的位置\r\n            if (willCenter < this.lineData[0].center) {\r\n              willIndex = this.willActiveIndex = 0\r\n            } else if (willCenter > this.lineData[this.lineData.length - 1].center) {\r\n              willIndex = this.willActiveIndex = this.lineData.length - 1\r\n            } else {\r\n              willIndex = this.lineData.findIndex((item, index, arr) => {\r\n                return Math.abs(item.center - willCenter) <= item.height / 2 + 10 && item.height !== 0\r\n              })\r\n            }\r\n\r\n            this.willActiveIndex = willIndex\r\n\r\n            // 清除还原歌词定时器\r\n            if (this.timer) {\r\n              clearTimeout(this.timer)\r\n              this.timer = null\r\n            }\r\n          }\r\n        })\r\n\r\n        scroll.on('scrollEnd', () => {\r\n          if (this.readyForChange && this.scrollByUser) {\r\n            this.scrollByUser = false\r\n            scroll.scrollTo(0, -(this.lineData[this.willActiveIndex].center - this.boxHeight / 2), 1000)\r\n\r\n            // 延迟还原数据 和 歌词位置\r\n            this.timer = setTimeout(() => {\r\n              this.readyForChange = false\r\n              this.willActiveIndex = null\r\n              scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n            }, 5000)\r\n          }\r\n        })\r\n\r\n        if (this.readyForChange === false) {\r\n          scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n        }\r\n      }, 1000)\r\n    })\r\n\r\n    // 获取歌词容器高度\r\n    this.boxHeight = this.$refs.lyricArea.$el.getBoundingClientRect().height\r\n    window.onresize = () => {\r\n      this.boxHeight = this.$refs.lyricArea.$el.getBoundingClientRect().height\r\n    }\r\n  },\r\n  activated () {\r\n    if (this.lyricChanged) {\r\n      this.lyricLoading = false\r\n      scroll.scrollTo(0, 0, 0)\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          this.updateLineData()\r\n\r\n          scroll.refresh()\r\n\r\n          if (this.readyForChange === false) {\r\n            scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n          }\r\n        }, 1000)\r\n      })\r\n      this.lyricChanged = false\r\n    }\r\n  },\r\n  watch: {\r\n    'activeIndex' (val) {\r\n      if (this.lineData.length > 0 && this.readyForChange === false) {\r\n        let scrollDistance = this.lineData[val].center - this.boxHeight / 2\r\n        scroll.scrollTo(0, -scrollDistance, 1000)\r\n      }\r\n    },\r\n    'currentSong.songmid' (val) {\r\n      this.lyricLoading = true\r\n      this.lyricChanged = true\r\n      this.lineData = []\r\n      this.willActiveIndex = null\r\n      this.requestLyric(() => {\r\n        this.lyricLoading = false\r\n        this.$nextTick(() => {\r\n          setTimeout(() => {\r\n            this.updateLineData()\r\n\r\n            scroll.refresh()\r\n\r\n            if (this.readyForChange === false) {\r\n              scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n            }\r\n          }, 1000)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .lyric-page {\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex-direction: column;\r\n    position: relative;\r\n    .volume-area {\r\n      margin: 15px 25px;\r\n      display: flex;\r\n      align-items: center;\r\n      .icon-volume {\r\n        color: rgba(#aaa, 0.8);\r\n      }\r\n      .volume-box {\r\n        flex: 1;\r\n        height: 17px;\r\n        margin: 0 20px;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .volume-bar {\r\n        width: 100%;\r\n        height: 2px;\r\n        border-radius: 2px;\r\n        background: rgba($color: #eee, $alpha: 0.1);\r\n        position: relative;\r\n        .volume {\r\n          border-radius: 2px;\r\n          height: 2px;\r\n          position: absolute;\r\n          background: rgba(#aaa, 0.8);\r\n          .volume-button {\r\n            display: inline-block;\r\n            width: 8px;\r\n            height: 8px;\r\n            border-radius: 50%;\r\n            background: #eee;\r\n            position: absolute;\r\n            right: -5px;\r\n            top: -3px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .lyric-cursor {\r\n      position: absolute;\r\n      width: 100vw;\r\n      height: 25px;\r\n      display: flex;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      margin: auto;\r\n      box-sizing: border-box;\r\n      padding: 0 5px;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      z-index: 1;\r\n      .cursor-icon {\r\n        border-radius: 3px;\r\n        border-width: 8px 8px 8px 13px;\r\n        border-color: transparent transparent transparent #ccc;\r\n        border-style: solid;\r\n      }\r\n      .cursor-line {\r\n        border: none;\r\n        background-color: rgba(#ccc, 0.8);\r\n        flex: 1;\r\n        height: 1px;\r\n        transform: scaleY(0.5);\r\n        margin: 0 5px;\r\n      }\r\n      .cursor-time {\r\n        font-size: 12px;\r\n        color: #eee;\r\n      }\r\n    }\r\n    .lyric-area {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      color: #aaa;\r\n      text-align: center;\r\n      position: relative;\r\n      .lyric-touch {\r\n        height: 100%;\r\n        overflow: hidden;\r\n        padding: 0 30px;\r\n      }\r\n      .lyric-content {\r\n        overflow: hidden;\r\n        padding: 50% 0;\r\n      }\r\n      .lyric-line {\r\n        margin: 20px 0;\r\n        word-break: break-word;\r\n      }\r\n      .lyric-loading {\r\n        color: #eee;\r\n        display: flex;\r\n        height: 100%;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/lyric.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lyric-page\"},[_c('div',{staticClass:\"volume-area\"},[_c('span',{staticClass:\"iconfont icon-volume\"}),_vm._v(\" \"),_c('v-touch',{staticClass:\"volume-box\",on:{\"tap\":_vm.changeVolumeHandler,\"pan\":_vm.changeVolumeHandler}},[_c('div',{ref:\"volume\",staticClass:\"volume-bar\"},[_c('div',{staticClass:\"volume\",style:({width: _vm.volume * 100 + '%'})},[_c('div',{staticClass:\"volume-button\"})])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"lyric-area\"},[_c('v-touch',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.readyForChange),expression:\"readyForChange\"}],staticClass:\"lyric-cursor\",on:{\"tap\":_vm.lyricChanger}},[_c('span',{staticClass:\"cursor-icon\"}),_vm._v(\" \"),_c('hr',{staticClass:\"cursor-line\"}),_vm._v(\" \"),_c('span',{staticClass:\"cursor-time\"},[_vm._v(_vm._s(_vm.willActiveTime))])]),_vm._v(\" \"),_c('v-touch',{ref:\"lyricArea\",staticClass:\"lyric-touch\",on:{\"tap\":_vm.togglePage,\"pan\":_vm.panHandler}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.lyricLoading),expression:\"!lyricLoading\"}],staticClass:\"lyric-box\"},[_c('div',{staticClass:\"lyric-content\",style:({padding: _vm.boxHeight / 2 + 'px 0'})},_vm._l((_vm.lyricArray),function(item,index){return _c('div',{key:'lyricI'+index,ref:\"line\",refInFor:true,staticClass:\"lyric-line\",style:({color: _vm.activeIndex === index ? '#fff' : _vm.willActiveIndex === index ? '#eee':''})},[_c('p',{staticClass:\"lyric-origin\",domProps:{\"innerHTML\":_vm._s(item.text)}}),_vm._v(\" \"),(item.trans)?_c('p',{staticClass:\"lyric-trans\",domProps:{\"innerHTML\":_vm._s(item.trans)}}):_vm._e()])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lyricLoading),expression:\"lyricLoading\"}],staticClass:\"lyric-loading\"},[_c('span',[_vm._v(\"歌词加载中...\")])])])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5cdcce07\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/lyric.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5cdcce07\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./lyric.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lyric.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lyric.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5cdcce07\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./lyric.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5cdcce07\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/lyric.vue\n// module id = null\n// module chunks = ","<template>\r\n<transition name=\"fade\">\r\n<div class=\"player-page\">\r\n  <div\r\n    class=\"page-bg\"\r\n    :style=\"{backgroundImage: 'url('+pageBg+')'}\"\r\n  >\r\n\r\n  </div>\r\n  <div class=\"player-header\">\r\n    <v-touch\r\n      @tap=\"$router.go(-1)\"\r\n      class=\"back\"\r\n    ></v-touch>\r\n    <div ref=\"firstTitle\" class=\"header-title\">\r\n      <div class=\"first-title-box\">\r\n        <p class=\"first-title-content\">{{currentSong.songname}}</p>\r\n      </div>\r\n      <span class=\"sub-title\">{{currentSong.singer}}</span>\r\n    </div>\r\n    <span class=\"share iconfont icon-share\">\r\n    </span>\r\n  </div>\r\n  <div class=\"player-main\">\r\n    <transition name='fast-fade'>\r\n      <keep-alive>\r\n        <div\r\n          :is=\"showing\"\r\n          @togglepage=\"togglePage\"\r\n        >\r\n        </div>\r\n      </keep-alive>\r\n    </transition>\r\n  </div>\r\n  <div class=\"player-footer\">\r\n    <!-- 播放进度 -->\r\n    <div class=\"progress-area\">\r\n      <span class=\"current-time\">{{currentTimeStr}}</span>\r\n      <v-touch\r\n        tag=\"div\"\r\n        class=\"progress-can-touch\"\r\n        @tap=\"changeProgressTap\"\r\n        @pan=\"changeProgressPan\"\r\n      >\r\n        <div\r\n          ref=\"progress\"\r\n          class=\"progress-bar\"\r\n        >\r\n          <div :style=\"{width: loadProgress}\" class=\"load-progress\">\r\n          </div>\r\n          <div :style=\"{width: progressWidth}\" class=\"progress\">\r\n            <span class=\"progress-icon\" :class=\"{loading: dataLoading}\"></span>\r\n          </div>\r\n        </div>\r\n      </v-touch>\r\n      <span class=\"duration\">{{durationStr}}</span>\r\n    </div>\r\n    <!-- 控制按钮 -->\r\n    <div class=\"control-area\">\r\n      <v-touch\r\n        class=\"loop-type iconfont\"\r\n        :class=\"loopTypeClass\"\r\n        @tap=\"toggleLoopType\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"prev iconfont icon-prev\"\r\n        @tap=\"changeSong({type:'prev'})\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"play iconfont icon-play-fill\"\r\n        :class=\"running ? 'icon-pause' : 'icon-play-fill'\"\r\n        @tap=\"changePlayState('toggle')\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"next iconfont icon-next\"\r\n        @tap=\"changeSong({type:'next'})\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"show-playlist iconfont icon-list\"\r\n        v-touch-light\r\n        @tap=\"playlistOn\"\r\n      ></v-touch>\r\n    </div>\r\n  </div>\r\n  <playlist\r\n    :showPlaylist=\"showPlaylist\"\r\n    @close=\"showPlaylist=false\"\r\n  >\r\n  </playlist>\r\n</div>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapGetters, mapMutations, mapActions} from 'vuex'\r\nimport {formatTime} from '@/utils'\r\n\r\nimport cd from './cd'\r\nimport lyric from './lyric'\r\nimport playlist from '#/overlay/playlist'\r\nexport default {\r\n  components: {\r\n    cd,\r\n    lyric,\r\n    playlist\r\n  },\r\n  data () {\r\n    return {\r\n      showPlaylist: false,\r\n      pageBg: '',\r\n      showing: 'cd',\r\n      title: '',\r\n      timeSetting: null,\r\n      progressBarWidth: '',\r\n      progressBarOffset: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['running', 'playlist', 'currentSong', 'duration', 'currentTime', 'loadedTime', 'loopType', 'dataLoading']),\r\n    ...mapGetters('player', ['progress']),\r\n    durationStr () {\r\n      return formatTime(this.duration)\r\n    },\r\n    currentTimeStr () {\r\n      if (this.timeSetting !== null) {\r\n        return formatTime(this.timeSetting)\r\n      } else {\r\n        return formatTime(this.currentTime)\r\n      }\r\n    },\r\n    progressWidth () {\r\n      if (this.timeSetting !== null) {\r\n        return this.timeSetting / this.duration * 100 + '%'\r\n      } else {\r\n        return this.progress * 100 + '%'\r\n      }\r\n    },\r\n    loadProgress () {\r\n      if (this.duration === 0) {\r\n        return 0\r\n      }\r\n      return this.loadedTime / this.duration * 100 + '%'\r\n    },\r\n    loopTypeClass () {\r\n      switch (this.loopType) {\r\n        case 'proper':\r\n          return 'icon-circle'\r\n        case 'single':\r\n          return 'icon-single'\r\n        case 'random':\r\n          return 'icon-random'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['setCurrentTime', 'toggleLoopType', 'changePlayState']),\r\n    ...mapActions('player', ['changeSong']),\r\n    // 滚动条来回滚动\r\n    scrollRound (scroll, end) {\r\n      if (scroll.maxScrollX < -30) {\r\n        setTimeout(() => {\r\n          scroll.scrollTo(end, 0, scroll.maxScrollX / -30 * 1000, {style: 'cubic-bezier(0, 0, 1, 1)'})\r\n        }, 2000)\r\n      }\r\n    },\r\n    togglePage () {\r\n      if (this.showing === 'cd') {\r\n        this.showing = 'lyric'\r\n      } else if (this.showing === 'lyric') {\r\n        this.showing = 'cd'\r\n      }\r\n    },\r\n    playlistOn () {\r\n      this.showPlaylist = true\r\n    },\r\n    changeProgressPan (e) {\r\n      let time = (e.center.x - this.progressBarOffset) / this.progressBarWidth * this.duration\r\n      this.timeSetting = time < 0 ? 0 : time > this.duration ? this.duration : time\r\n      if (e.isFinal) {\r\n        this.setCurrentTime(this.timeSetting)\r\n        setTimeout(() => {\r\n          this.timeSetting = null\r\n        }, 100)\r\n      }\r\n    },\r\n    changeProgressTap (e) {\r\n      let time = (e.center.x - this.progressBarOffset) / this.progressBarWidth * this.duration\r\n      this.setCurrentTime(time)\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      let img = new Image()\r\n      img.src = this.currentSong.albumcover\r\n      img.onload = () => {\r\n        this.pageBg = img.src\r\n        img = null\r\n      }\r\n    }, 1000)\r\n\r\n    let scroll = this.title = new window.IScroll(this.$refs.firstTitle, {\r\n      scrollX: true,\r\n      scrollY: false,\r\n      bounce: false,\r\n      click: false,\r\n      disableMouse: true,\r\n      disablePointer: true,\r\n      disableTouch: true,\r\n      bounceEasing: {\r\n        style: 'cubic-bezier(0,0,1,1)'\r\n      }\r\n    })\r\n\r\n    scroll.on('scrollEnd', () => {\r\n      if (scroll.maxScrollX === scroll.x) {\r\n        this.scrollRound(scroll, 0)\r\n      } else if (scroll.x === 0) {\r\n        this.scrollRound(scroll, scroll.maxScrollX)\r\n      }\r\n    })\r\n\r\n    this.scrollRound(scroll, scroll.maxScrollX)\r\n\r\n    let progressRect = this.$refs.progress.getBoundingClientRect()\r\n    this.progressBarOffset = progressRect.x || progressRect.left\r\n    this.progressBarWidth = progressRect.width\r\n  },\r\n  watch: {\r\n    'playlist.length' (val) {\r\n      if (val === 0 && this.$route.path === '/player') {\r\n        this.$router.go(-1)\r\n      }\r\n    },\r\n    'currentSong.src' () {\r\n      this.title.scrollTo(0, 0, 0)\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          this.title.refresh()\r\n          this.scrollRound(this.title, this.title.maxScrollX)\r\n        }, 1000)\r\n      })\r\n\r\n      setTimeout(() => {\r\n        let img = new Image()\r\n        img.src = this.currentSong.albumcover\r\n        img.onload = () => {\r\n          this.pageBg = img.src\r\n          img = null\r\n        }\r\n      }, 1000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/style/scss.config.scss';\r\n.player-page {\r\n  box-sizing: border-box;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding-top: 50px;\r\n  flex: 1;\r\n\r\n  .page-bg {\r\n    background-color: #545454;\r\n    position: fixed;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    top: 0;\r\n    left: 0;\r\n    filter: blur(30px) brightness(50%);\r\n    transform: scale3d(1.5, 1.5, 1);\r\n    transition: background 2s;\r\n  }\r\n  .player-header {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    height: 50px;\r\n    width: 100vw;\r\n    display: flex;\r\n    align-items: center;\r\n    color: white;\r\n    .back {\r\n      width: 25 / $base + rem;\r\n      height: 25 / $base + rem;\r\n      background: url('~@/components/common/img/ow.png') no-repeat center / 100%;\r\n      margin: 0 20px;\r\n    }\r\n    .header-title {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      overflow: hidden;\r\n      .first-title-box {\r\n        align-self: flex-start;\r\n        .first-title-content {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n      .sub-title {\r\n        font-size: 12px;\r\n        color: #aaa;\r\n      }\r\n    }\r\n    .share {\r\n      font-size: 25px;\r\n      margin: 0 20px;\r\n    }\r\n  }\r\n  .player-main {\r\n    overflow: hidden;\r\n    position: relative;\r\n    flex: 1;\r\n  }\r\n  .player-footer {\r\n    position: relative;\r\n    .progress-area {\r\n      display: flex;\r\n      margin: 15px;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      .current-time,\r\n      .duration {\r\n        font-size: 12px;\r\n        font-size: 10px;\r\n        color: #eee;\r\n      }\r\n      .progress-can-touch {\r\n        margin: 0 15px;\r\n        flex: 1;\r\n        height: 14px;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .progress-bar {\r\n        width: 100%;\r\n        height: 3px;\r\n        background-color: rgba($color: white, $alpha: 0.1);\r\n        position: relative;\r\n        border-radius: 3px;\r\n      }\r\n      .load-progress {\r\n        border-radius: 3px;\r\n        height: 100%;\r\n        background-color: rgba(white, 0.3);\r\n        position: absolute;\r\n      }\r\n      .progress {\r\n        border-radius: 3px;\r\n        height: 100%;\r\n        background-color: $theme-color;\r\n        position: absolute;\r\n        .progress-icon {\r\n          position: absolute;\r\n          display: inline-block;\r\n          width: 3px;\r\n          height: 3px;\r\n          border: 5px solid white;\r\n          border-radius: 50%;\r\n          background: $theme-color;\r\n          right: -6.5px;\r\n          top: -6.5 + 1.5px;\r\n        }\r\n        .progress-icon.loading::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: -5px;\r\n          left: -5px;\r\n          width: 13px;\r\n          height: 13px;\r\n          background: url('~@/components/common/img/loading.png') center / 100%;\r\n          animation: loading 2s linear infinite;\r\n        }\r\n      }\r\n    }\r\n    .control-area {\r\n      margin: 20px 10px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .loop-type,\r\n      .show-playlist {\r\n        font-size: 22px;\r\n        color: rgba(white, 0.6);\r\n      }\r\n      .prev,\r\n      .next {\r\n        color: rgba($color: #eee, $alpha: 0.8);\r\n        font-size: 28px;\r\n      }\r\n      .play {\r\n        color: rgba(#eee, 0.9);\r\n        font-size: 50px;\r\n        margin: 0 -15px;\r\n        font-weight: 100;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/Player.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"player-page\"},[_c('div',{staticClass:\"page-bg\",style:({backgroundImage: 'url('+_vm.pageBg+')'})}),_vm._v(\" \"),_c('div',{staticClass:\"player-header\"},[_c('v-touch',{staticClass:\"back\",on:{\"tap\":function($event){_vm.$router.go(-1)}}}),_vm._v(\" \"),_c('div',{ref:\"firstTitle\",staticClass:\"header-title\"},[_c('div',{staticClass:\"first-title-box\"},[_c('p',{staticClass:\"first-title-content\"},[_vm._v(_vm._s(_vm.currentSong.songname))])]),_vm._v(\" \"),_c('span',{staticClass:\"sub-title\"},[_vm._v(_vm._s(_vm.currentSong.singer))])]),_vm._v(\" \"),_c('span',{staticClass:\"share iconfont icon-share\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"player-main\"},[_c('transition',{attrs:{\"name\":\"fast-fade\"}},[_c('keep-alive',[_c(_vm.showing,{tag:\"div\",on:{\"togglepage\":_vm.togglePage}})])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"player-footer\"},[_c('div',{staticClass:\"progress-area\"},[_c('span',{staticClass:\"current-time\"},[_vm._v(_vm._s(_vm.currentTimeStr))]),_vm._v(\" \"),_c('v-touch',{staticClass:\"progress-can-touch\",attrs:{\"tag\":\"div\"},on:{\"tap\":_vm.changeProgressTap,\"pan\":_vm.changeProgressPan}},[_c('div',{ref:\"progress\",staticClass:\"progress-bar\"},[_c('div',{staticClass:\"load-progress\",style:({width: _vm.loadProgress})}),_vm._v(\" \"),_c('div',{staticClass:\"progress\",style:({width: _vm.progressWidth})},[_c('span',{staticClass:\"progress-icon\",class:{loading: _vm.dataLoading}})])])]),_vm._v(\" \"),_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(_vm.durationStr))])],1),_vm._v(\" \"),_c('div',{staticClass:\"control-area\"},[_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"loop-type iconfont\",class:_vm.loopTypeClass,on:{\"tap\":_vm.toggleLoopType}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"prev iconfont icon-prev\",on:{\"tap\":function($event){_vm.changeSong({type:'prev'})}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"play iconfont icon-play-fill\",class:_vm.running ? 'icon-pause' : 'icon-play-fill',on:{\"tap\":function($event){_vm.changePlayState('toggle')}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"next iconfont icon-next\",on:{\"tap\":function($event){_vm.changeSong({type:'next'})}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"show-playlist iconfont icon-list\",on:{\"tap\":_vm.playlistOn}})],1)]),_vm._v(\" \"),_c('playlist',{attrs:{\"showPlaylist\":_vm.showPlaylist},on:{\"close\":function($event){_vm.showPlaylist=false}}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f5c6986a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/Player.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f5c6986a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Player.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f5c6986a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Player.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f5c6986a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/Player.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}