{"version":3,"sources":["webpack:///src/components/Player/cd.vue","webpack:///./src/components/Player/cd.vue?4c5d","webpack:///./src/components/Player/cd.vue","webpack:///src/components/Player/lyric.vue","webpack:///./src/components/Player/lyric.vue?2380","webpack:///./src/components/Player/lyric.vue","webpack:///src/components/Player/Player.vue","webpack:///./src/components/Player/Player.vue?6671","webpack:///./src/components/Player/Player.vue"],"names":["cd","props","data","pnncd","panningStyle","protecting","doingChangeSong","stopAnimation","commentnum","computed","extends_default","Object","vuex_esm","methods","togglePage","e","srcEvent","stopPropagation","stopImmediatePropagation","preventDefault","this","$emit","panHandler","_this","transform","deltaX","isFinal","totalWidth","document","documentElement","clientWidth","changeSong","type","beforeChange","setTimeout","transition","swipeHandler","_this2","enter","el","done","style","visibility","leave","display","created","songIndex","currentSong","indexInPlaylist","keyIndex","playOrder","indexOf","prev","length","next","mark","Date","now","Math","random","index","watch","currentSong.src","_this3","currentSong.indexInPlaylist","val","cdMoveDirection","pop","unshift","shift","push","changeCdMoveDirection","currentSong.songid","_this4","jsonp_default","currentServer","url","name","floor","err","console","log","num","batch_commenttotal","commenttotal","Player_cd","render","_vm","_h","$createElement","_c","_self","staticClass","on","tap","pan","swipe","class","running","_v","attrs","tag","_l","item","key","animation","directives","rawName","value","playlist","albummid","expression","arg","shownum","_s","staticRenderFns","components_Player_cd","__webpack_require__","normalizeComponent","ssrContext","lyric_scroll","lyric","tiemr","timerRefresh","lyricTrans","lyricArray","lyricLoading","boxHeight","lineData","readyForChange","scrollByUser","willActiveIndex","lyricChanged","activeIndex","currentTime","time","active","findIndex","arr","text","willActiveTime","utils","changeVolumeHandler","volumeRect","$refs","volume","getBoundingClientRect","volumeBarWidth","width","volumeBarOffset","left","x","offset","center","round","changeVolume","lyricChanger","setCurrentTime","requestLyric","cb","songmid","trans","$nextTick","updateLineData","line","map","offsetTop","height","clientHeight","mounted","window","IScroll","lyricArea","$el","probeType","click","willIndex","willCenter","y","abs","timer","clearTimeout","scrollTo","onresize","activated","refresh","scrollDistance","dataLoading","_this5","tiemrretimerRefresh","Player_lyric","ref","_e","padding","refInFor","color","domProps","innerHTML","Player","components","lyric_normalizeComponent","showPlaylist","pageBg","showing","title","timeSetting","progressBarWidth","progressBarOffset","durationStr","duration","currentTimeStr","progressWidth","progress","loadProgress","loadedTime","loopTypeClass","loopType","scrollRound","scroll","end","maxScrollX","playlistOn","changeProgressPan","changeProgressTap","img","Image","src","albumcover","onload","firstTitle","scrollX","scrollY","bounce","disableMouse","disablePointer","disableTouch","bounceEasing","progressRect","playlist.length","$route","path","$router","replace","Player_Player","backgroundImage","$event","go","songname","singer","togglepage","loading","toggleLoopType","changePlayState","close","Player_Component","Player_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/0.ccad11e398fdb068b150.js","sourcesContent":["<template>\r\n<div class=\"cd-page\">\r\n  <v-touch\r\n    class=\"cd-main\"\r\n    @tap=\"togglePage\"\r\n    @pan=\"panHandler\"\r\n    @swipe=\"swipeHandler\"\r\n  >\r\n    <!-- 磁头 -->\r\n    <div class=\"cd-head\">\r\n      <div class=\"cd-heads\" :class=\"(running && !doingChangeSong) ? '': 'pause'\">\r\n      </div>\r\n    </div>\r\n    <!-- cd封面 -->\r\n    <div class=\"cd-cover-box\"></div>\r\n      <transition-group\r\n        tag=\"div\"\r\n        name=\"mini-order\"\r\n        class=\"cd-cover-list\"\r\n        :style=\"panningStyle\"\r\n        @enter=\"enter\"\r\n        @leave=\"leave\"\r\n      >\r\n        <div\r\n          v-for=\"(item,index) in pnncd\"\r\n          :key=\"item.mark\"\r\n          class=\"cd-cover-item\"\r\n        >\r\n          <div\r\n            class=\"cd-cover-bg\"\r\n            :class=\"(running && !doingChangeSong && index === 1) ? 'running' : ''\"\r\n            :style=\"{animation: stopAnimation}\"\r\n          >\r\n            <div\r\n              class=\"cd-cover\"\r\n              v-src:before-cover=\"'https://y.gtimg.cn/music/photo_new/T002R300x300M000'+playlist[item.index].albummid+'.jpg?max_age=2592000'\"\r\n            >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </transition-group>\r\n  </v-touch>\r\n  <div class=\"operation-group\">\r\n    <span class=\"iconfont icon-heart\" v-touch-light></span>\r\n    <span class=\"iconfont icon-download\" v-touch-light></span>\r\n    <span class=\"comment\"  v-touch-light>\r\n      <span class=\"iconfont icon-comment\" :class=\"{shownum: commentnum}\"></span>\r\n      <span class=\"comment-num\">{{commentnum}}</span>\r\n    </span>\r\n    <span class=\"iconfont icon-more-item\" v-touch-light></span>\r\n  </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport {mapState, mapGetters, mapActions, mapMutations} from 'vuex'\r\nimport jsonp from 'jsonp'\r\n\r\nexport default {\r\n  props: ['direction'],\r\n  data () {\r\n    return {\r\n      pnncd: [], // 长度为3，表示上一首· 正在播放· 下一首 歌曲的位置\r\n      panningStyle: '', // 拖动距离\r\n      protecting: '', // 切歌操作正在受限制\r\n      doingChangeSong: '', // 正在进行切歌操作\r\n      stopAnimation: '', // 完全停止动画 在切歌后短暂开启\r\n      commentnum: '' // 评论数量\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['running', 'currentSong', 'playlist', 'cdMoveDirection']),\r\n    ...mapGetters('player', ['playOrder']),\r\n    ...mapGetters('config', ['currentServer'])\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['changeCdMoveDirection']),\r\n    ...mapActions('player', ['changeSong']),\r\n    togglePage (e) {\r\n      e.srcEvent.stopPropagation()\r\n      e.srcEvent.stopImmediatePropagation()\r\n      e.preventDefault()\r\n      this.$emit('togglepage')\r\n    },\r\n    panHandler (e) {\r\n      // 保护中的动画无法操作\r\n      if (this.protecting) {\r\n        return false\r\n      }\r\n      this.doingChangeSong = true\r\n\r\n      this.panningStyle = {transform: 'translate3d(-100vw, 0, 0) translate3d(' + e.deltaX + 'px,0,0)'}\r\n\r\n      if (e.isFinal) {\r\n        // 动画间隔\r\n        let duration = 200\r\n\r\n        let totalWidth = document.documentElement.clientWidth\r\n        if (e.deltaX / totalWidth > 0.45) {\r\n          this.protecting = true\r\n          // 上一首\r\n          this.changeSong({\r\n            type: 'prev',\r\n            beforeChange: () => {\r\n              // 动画完成后取消保护，恢复动画设置\r\n              setTimeout(() => {\r\n                this.protecting = false\r\n                this.doingChangeSong = false\r\n              }, duration)\r\n              this.panningStyle = {transition: 'all .2s ease-out'}\r\n            }\r\n          })\r\n        } else if (e.deltaX / totalWidth < -0.45) {\r\n          this.protecting = true\r\n          // 下一首\r\n          this.changeSong({\r\n            type: 'next',\r\n            beforeChange: () => {\r\n              setTimeout(() => {\r\n                this.protecting = false\r\n                this.doingChangeSong = false\r\n              }, duration)\r\n              this.panningStyle = {transition: 'all .2s ease-out'}\r\n            }\r\n          })\r\n        } else {\r\n          // 未触发切歌\r\n          this.panningStyle = {transition: 'all .2s ease-out'}\r\n          setTimeout(() => {\r\n            this.protecting = false\r\n            this.doingChangeSong = false\r\n          }, duration)\r\n        }\r\n      }\r\n    },\r\n    swipeHandler (e) {\r\n      if (this.protecting) {\r\n        return false\r\n      }\r\n      this.doingChangeSong = true\r\n      this.protecting = true\r\n      let duration = 200\r\n      if (e.deltaX > 0) {\r\n        // 上一首\r\n        this.changeSong({\r\n          type: 'prev',\r\n          beforeChange: () => {\r\n            // 动画完成后取消保护，恢复动画设置\r\n            setTimeout(() => {\r\n              this.protecting = false\r\n              this.doingChangeSong = false\r\n            }, duration)\r\n          }\r\n        })\r\n      } else if (e.deltaX < 0) {\r\n        // 表示切换方向\r\n        this.changeSong({\r\n          type: 'next',\r\n          beforeChange: () => {\r\n            // 动画完成后取消保护，恢复动画设置\r\n            setTimeout(() => {\r\n              this.protecting = false\r\n              this.doingChangeSong = false\r\n            }, duration)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    enter (el, done) {\r\n      el.style.visibility = 'hidden'\r\n      setTimeout(() => {\r\n        done()\r\n        el.style.visibility = ''\r\n      }, 200)\r\n    },\r\n    leave (el, done) {\r\n      el.style.display = 'none'\r\n      setTimeout(() => {\r\n        done()\r\n        el.style.display = ''\r\n      }, 200)\r\n    }\r\n  },\r\n  created () {\r\n    let songIndex = this.currentSong.indexInPlaylist\r\n    let keyIndex = this.playOrder.indexOf(songIndex)\r\n    let prev = keyIndex - 1 < 0 ? this.playOrder.length - 1 : keyIndex - 1\r\n    let next = keyIndex + 1 > this.playOrder.length - 1 ? 0 : keyIndex + 1\r\n    // 初始显示列表\r\n    this.pnncd = [\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: this.playOrder[prev]\r\n      },\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: songIndex\r\n      },\r\n      {\r\n        mark: Date.now() * Math.random(),\r\n        index: this.playOrder[next]\r\n      }\r\n    ]\r\n  },\r\n  watch: {\r\n    'currentSong.src' () {\r\n      setTimeout(() => {\r\n        this.stopAnimation = 'none'\r\n      }, 200)\r\n      setTimeout(() => {\r\n        this.stopAnimation = ''\r\n      }, 700)\r\n    },\r\n    'currentSong.indexInPlaylist' (val) {\r\n      this.commentnum = ''\r\n      // 当歌曲变化时，pnn列表发生相应变化\r\n      let songIndex = val\r\n      let keyIndex = this.playOrder.indexOf(songIndex)\r\n      let prev = keyIndex - 1 < 0 ? this.playOrder.length - 1 : keyIndex - 1\r\n      let next = keyIndex + 1 > this.playOrder.length - 1 ? 0 : keyIndex + 1\r\n\r\n      if (this.cdMoveDirection === 'right') {\r\n        this.pnncd.pop()\r\n        this.pnncd.unshift({\r\n          mark: Date.now() * Math.random(),\r\n          index: this.playOrder[prev]\r\n        })\r\n      } else if (this.cdMoveDirection === 'left') {\r\n        this.pnncd.shift()\r\n        this.pnncd.push({\r\n          mark: Date.now() * Math.random(),\r\n          index: this.playOrder[next]\r\n        })\r\n      } else {\r\n        this.pnncd = [\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: this.playOrder[prev]\r\n          },\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: songIndex\r\n          },\r\n          {\r\n            mark: Date.now() * Math.random(),\r\n            index: this.playOrder[next]\r\n          }\r\n        ]\r\n      }\r\n      this.changeCdMoveDirection('')\r\n    },\r\n    'currentSong.songid' (val) {\r\n      jsonp(this.currentServer.url + '/songcommentnum?topic=' + val, {\r\n        name: 'jsoncallback2387000247395' + Math.floor((Math.random() * 8999) + 1000)\r\n      }, (err, data) => {\r\n        if (err) {\r\n          console.log('Get SongCommentNum Failed')\r\n        } else {\r\n          let num = data.batch_commenttotal[0].commenttotal\r\n\r\n          if (num <= 999) {\r\n            this.commentnum = num\r\n          } else if (num < 10000) {\r\n            this.commentnum = '999+'\r\n          } else if (num < 100000) {\r\n            this.commentnum = '1w+'\r\n          } else if (num < 1000000) {\r\n            this.commentnum = '10w+'\r\n          } else {\r\n            this.commentnum = '100w+'\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.cd-page {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  flex-direction: column;\r\n}\r\n.cd-main {\r\n  flex: 1;\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n.cd-head {\r\n  width: 100vw;\r\n  height: 0.5px;\r\n  background-image: repeating-linear-gradient(to right,transparent,rgba(200,200,200,0.3) 30%,rgba(200,200,200,.3) 70%, transparent);\r\n  padding-bottom: (100 / 3.75 ) + vw;\r\n  background-clip: content-box;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: -(50 / 3.75 ) + vw;\r\n  .cd-heads {\r\n    margin-top: -49 / 414 * (100 / 3.75) + vw;\r\n    margin-left: (276 - 49) / 276 * (276 / 414 * (100 / 3.75)) + vw;\r\n    height: (100 / 3.75) + vw;\r\n    width: 276 / 414 * (100 / 3.75) + vw;\r\n    background: url('~@/components/common/img/cd-heads.png') no-repeat center / 100%;\r\n    transition: transform 0.4s;\r\n    transform-origin: 49 / 414 * (100 / 3.75) + vw 49 / 414 * (100 / 3.75) + vw;\r\n    position: relative;\r\n    z-index: 1;\r\n  }\r\n  .cd-heads.pause {\r\n    transform: rotate(-20deg);\r\n  }\r\n}\r\n.cd-cover-box {\r\n  width: 80vw;\r\n  height: 80vw;\r\n  margin: 0 10vw;\r\n  background-color: rgba(#eee, 0.1);\r\n  border-radius: 50%;\r\n  position: absolute;\r\n}\r\n.cd-cover-list {\r\n  width: 100vw;\r\n  position: absolute;\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  // margin-left: -100vw;\r\n  transform: translate3d(-100vw, 0, 0);\r\n  .cd-cover-item {\r\n    width: 80vw;\r\n    height: 80vw;\r\n    margin: 0 10vw;\r\n    flex-shrink: 0;\r\n  }\r\n  .cd-cover-bg {\r\n    width: 80vw;\r\n    height: 80vw;\r\n    background: url(\"~@/components/common/img/cover-border.png\") no-repeat center / 100% 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    animation: coverrunning 20s linear paused infinite;\r\n    .cd-cover {\r\n      box-sizing: border-box;\r\n      overflow: hidden;\r\n      border-radius: 50%;\r\n      width: (804 - 130 * 2) * 80 / 804 + vw;\r\n      height: (804 - 130 * 2) * 80 / 804 + vw;\r\n      border: 9 * 80 / 804 + vw solid black;\r\n      background: {\r\n        position: center;\r\n        size: 100% 100%;\r\n      }\r\n    }\r\n    .cd-cover.before-cover {\r\n      background: url('~@/components/common/img/cover-noload.png') no-repeat center / 110%;\r\n    }\r\n  }\r\n  .cd-cover-bg.running {\r\n    animation-play-state: running!important;\r\n  }\r\n}\r\n.operation-group {\r\n  width: 100vw;\r\n  position: absolute;\r\n  box-sizing: border-box;\r\n  bottom: 0;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  padding: 15px 40px;\r\n  .iconfont{\r\n    font-size: 23px;\r\n    color: white;\r\n  }\r\n  .comment {\r\n    width: 23px;\r\n    height: 25px;\r\n    position: relative;\r\n    .comment-num {\r\n      color: white;\r\n      left: 65%;\r\n      bottom: 70%;\r\n      position: absolute;\r\n      font-size: 12px;\r\n      font-size: 10px;\r\n      line-height: 12px;\r\n    }\r\n  }\r\n  .icon-comment.shownum {\r\n    position: absolute;\r\n    clip-path: polygon(0 0, 60% 0, 60% 30%,100% 30% ,100% 100%, 0 100%, 0 0);\r\n  }\r\n}\r\n</style>\r\n<style>\r\n@keyframes coverrunning {\r\n  from {\r\n    transform: rotate(0)\r\n  }\r\n  to {\r\n    transform: rotate(360deg)\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/cd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cd-page\"},[_c('v-touch',{staticClass:\"cd-main\",on:{\"tap\":_vm.togglePage,\"pan\":_vm.panHandler,\"swipe\":_vm.swipeHandler}},[_c('div',{staticClass:\"cd-head\"},[_c('div',{staticClass:\"cd-heads\",class:(_vm.running && !_vm.doingChangeSong) ? '': 'pause'})]),_vm._v(\" \"),_c('div',{staticClass:\"cd-cover-box\"}),_vm._v(\" \"),_c('transition-group',{staticClass:\"cd-cover-list\",style:(_vm.panningStyle),attrs:{\"tag\":\"div\",\"name\":\"mini-order\"},on:{\"enter\":_vm.enter,\"leave\":_vm.leave}},_vm._l((_vm.pnncd),function(item,index){return _c('div',{key:item.mark,staticClass:\"cd-cover-item\"},[_c('div',{staticClass:\"cd-cover-bg\",class:(_vm.running && !_vm.doingChangeSong && index === 1) ? 'running' : '',style:({animation: _vm.stopAnimation})},[_c('div',{directives:[{name:\"src\",rawName:\"v-src:before-cover\",value:('https://y.gtimg.cn/music/photo_new/T002R300x300M000'+_vm.playlist[item.index].albummid+'.jpg?max_age=2592000'),expression:\"'https://y.gtimg.cn/music/photo_new/T002R300x300M000'+playlist[item.index].albummid+'.jpg?max_age=2592000'\",arg:\"before-cover\"}],staticClass:\"cd-cover\"})])])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"operation-group\"},[_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-heart\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-download\"}),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"comment\"},[_c('span',{staticClass:\"iconfont icon-comment\",class:{shownum: _vm.commentnum}}),_vm._v(\" \"),_c('span',{staticClass:\"comment-num\"},[_vm._v(_vm._s(_vm.commentnum))])]),_vm._v(\" \"),_c('span',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"iconfont icon-more-item\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6f0a231d\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/cd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6f0a231d\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cd.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6f0a231d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./cd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6f0a231d\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./cd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6f0a231d\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/cd.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"lyric-page\">\r\n    <div class=\"volume-area\">\r\n      <span class=\"iconfont icon-volume\"></span>\r\n\r\n      <v-touch\r\n        class=\"volume-box\"\r\n        @tap=\"changeVolumeHandler\"\r\n        @pan=\"changeVolumeHandler\"\r\n      >\r\n        <div ref=\"volume\" class=\"volume-bar\">\r\n          <div class=\"volume\" :style=\"{width: volume * 100 + '%'}\">\r\n            <div class=\"volume-button\"></div>\r\n          </div>\r\n        </div>\r\n      </v-touch>\r\n    </div>\r\n\r\n    <div\r\n      class=\"lyric-area\"\r\n    >\r\n      <v-touch\r\n        class=\"lyric-cursor\"\r\n        v-show=\"readyForChange\"\r\n        @tap=\"lyricChanger\"\r\n        v-if=\"lyricArray.length > 1\"\r\n      >\r\n        <span class=\"cursor-icon\"></span>\r\n        <hr class=\"cursor-line\"/>\r\n        <span class=\"cursor-time\">{{willActiveTime}}</span>\r\n      </v-touch>\r\n\r\n      <v-touch\r\n        class=\"lyric-touch\"\r\n        @tap=\"togglePage\"\r\n        @pan=\"panHandler\"\r\n        ref=\"lyricArea\"\r\n      >\r\n        <div\r\n          class=\"lyric-box\" v-show=\"!lyricLoading && lyricArray.length > 1\"\r\n        >\r\n          <div\r\n            class=\"lyric-content\"\r\n            :style=\"{padding: lyricArray.length > 1 ? boxHeight / 2 + 'px 0' : 0}\"\r\n          >\r\n            <div\r\n              class=\"lyric-line\"\r\n              v-for=\"(item,index) in lyricArray\"\r\n              :key=\"'lyricI'+index\"\r\n              :style=\"{color: activeIndex === index ? '#fff' : willActiveIndex === index ? '#eee':''}\"\r\n              ref=\"line\"\r\n            >\r\n              <p\r\n                class=\"lyric-origin\"\r\n                v-html=\"item.text\"\r\n              ></p>\r\n              <p\r\n                class=\"lyric-trans\"\r\n                v-if=\"item.trans\"\r\n                v-html=\"item.trans\"\r\n              ></p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"lyric-loading\" v-show=\"lyricLoading\">\r\n          <span>歌词加载中...</span>\r\n        </div>\r\n        <div class=\"pure-music\" v-if=\"!lyricLoading && lyricArray.length === 1\">\r\n          <span>{{ lyricArray[0] ? lyricArray[0].text : '' }}</span>\r\n        </div>\r\n      </v-touch>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapGetters, mapMutations} from 'vuex'\r\n\r\nimport jsonp from 'jsonp'\r\nimport {decodeBase64, formatTime, lrcParser} from '@/utils'\r\nlet scroll\r\nexport default {\r\n  data () {\r\n    return {\r\n      tiemr: null,\r\n      timerRefresh: null,\r\n      lyric: '',\r\n      lyricTrans: '',\r\n      lyricArray: [],\r\n      lyricLoading: true,\r\n      boxHeight: 0, // 歌词容器高度,\r\n      lineData: [],\r\n      readyForChange: false, // 预切换歌曲播放歌词位置\r\n      scrollByUser: false,\r\n      willActiveIndex: null,\r\n      lyricChanged: false // 在组件失活期间歌曲改变\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['volume', 'currentSong', 'currentTime', 'dataLoading']),\r\n    ...mapGetters('config', ['currentServer']),\r\n    activeIndex () {\r\n      if (this.lyricArray.length > 1) {\r\n        // 最小为0\r\n        if (this.currentTime <= this.lyricArray[0].time) {\r\n          return 0\r\n        }\r\n        let active = 0\r\n        active = this.lyricArray.findIndex((item, index, arr) => {\r\n          if (index < arr.length - 1) {\r\n            return this.currentTime >= item.time && this.currentTime < arr[index + 1].time\r\n          } else {\r\n            return index\r\n          }\r\n        })\r\n\r\n        // 跳过内容为空的歌词行\r\n        return this.lyricArray[active].text === ''\r\n          ? active - 1 < 0 ? 0 : active - 1\r\n          : active\r\n      } else {\r\n        return 0\r\n      }\r\n    },\r\n    willActiveTime () {\r\n      if (this.lyricArray.length < 1 || this.willActiveIndex === null) {\r\n        return '00:00'\r\n      } else {\r\n        return formatTime(this.lyricArray[this.willActiveIndex].time)\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['changeVolume', 'setCurrentTime']),\r\n    togglePage (e) {\r\n      this.$emit('togglepage')\r\n    },\r\n    changeVolumeHandler (e) {\r\n      let volumeRect = this.$refs.volume.getBoundingClientRect()\r\n      let volumeBarWidth = volumeRect.width\r\n      let volumeBarOffset = volumeRect.left || volumeRect.x\r\n      let offset = e.center.x - volumeBarOffset\r\n      let volume = Math.round(offset / volumeBarWidth * 100) / 100\r\n      if (volume < 0.05) {\r\n        volume = 0\r\n      } else if (volume > 0.95) {\r\n        volume = 1\r\n      }\r\n      this.changeVolume(volume)\r\n    },\r\n    panHandler () {\r\n      this.readyForChange = true\r\n      this.scrollByUser = true\r\n    },\r\n    lyricChanger () {\r\n      this.setCurrentTime(this.lyricArray[this.willActiveIndex].time)\r\n    },\r\n    requestLyric (cb) {\r\n      this.lyricLoading = true\r\n      this.scrollByUser = false\r\n      this.readyForChange = false\r\n      // 请求歌词\r\n      jsonp(this.currentServer.url + '/songlyric?songmid=' + this.currentSong.songmid, {\r\n        name: 'MusicJsonCallback_lrc'\r\n      }, (err, data) => {\r\n        if (err) {\r\n          this.lyricLoading = false\r\n          this.lyricArray = [{text: '无歌词'}]\r\n        } else {\r\n          try {\r\n            this.lyric = decodeBase64(data.lyric)\r\n\r\n            this.lyricTrans = data.trans && decodeBase64(data.trans)\r\n\r\n            this.lyricArray = lrcParser(this.lyric, this.lyricTrans)\r\n          } catch (e) {\r\n            console.log(e)\r\n            console.log('lyric parse failed')\r\n            this.lyricArray = [{text: '无歌词'}]\r\n          }\r\n          this.$nextTick(cb)\r\n        }\r\n      })\r\n    },\r\n    updateLineData () {\r\n      // 更新每行歌词的位置信息\r\n      this.lineData = this.$refs.line.map(item => {\r\n        let offset = item.offsetTop\r\n        let height = item.clientHeight\r\n        return {\r\n          offset,\r\n          height,\r\n          center: offset + height / 2\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.requestLyric(() => {\r\n      this.lyricLoading = false\r\n      setTimeout(() => {\r\n        this.updateLineData()\r\n\r\n        // 初始化滚动条\r\n        scroll = new window.IScroll(this.$refs.lyricArea.$el, {\r\n          probeType: 3,\r\n          click: false,\r\n          preventDefault: false\r\n        })\r\n\r\n        scroll.on('scroll', () => {\r\n          if (this.readyForChange && this.scrollByUser) {\r\n            let willIndex\r\n            // 预滚动到的歌词行中心点\r\n            let willCenter = -scroll.y + this.boxHeight / 2\r\n            // 根据预期滚动到的歌词行中心 和 全部歌词行中心 计算应该滚动到的位置\r\n            if (willCenter < this.lineData[0].center) {\r\n              willIndex = this.willActiveIndex = 0\r\n            } else if (willCenter > this.lineData[this.lineData.length - 1].center) {\r\n              willIndex = this.willActiveIndex = this.lineData.length - 1\r\n            } else {\r\n              willIndex = this.lineData.findIndex((item, index, arr) => {\r\n                return Math.abs(item.center - willCenter) <= item.height / 2 + 10 && item.height !== 0\r\n              })\r\n            }\r\n\r\n            this.willActiveIndex = willIndex\r\n\r\n            // 清除还原歌词定时器\r\n            if (this.timer) {\r\n              clearTimeout(this.timer)\r\n              this.timer = null\r\n            }\r\n          }\r\n        })\r\n\r\n        scroll.on('scrollEnd', () => {\r\n          if (this.readyForChange && this.scrollByUser) {\r\n            this.scrollByUser = false\r\n            scroll.scrollTo(0, -(this.lineData[this.willActiveIndex].center - this.boxHeight / 2), 1000)\r\n\r\n            // 延迟还原数据 和 歌词位置\r\n            this.timer = setTimeout(() => {\r\n              this.readyForChange = false\r\n              this.willActiveIndex = null\r\n              scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n            }, 5000)\r\n          }\r\n        })\r\n\r\n        if (this.readyForChange === false) {\r\n          scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n        }\r\n      }, 1000)\r\n    })\r\n\r\n    // 获取歌词容器高度\r\n    this.boxHeight = this.$refs.lyricArea.$el.getBoundingClientRect().height\r\n    window.onresize = () => {\r\n      this.boxHeight = this.$refs.lyricArea.$el.getBoundingClientRect().height\r\n    }\r\n  },\r\n  activated () {\r\n    if (this.lyricChanged) {\r\n      this.lyricLoading = false\r\n      scroll.scrollTo(0, 0, 0)\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          this.updateLineData()\r\n\r\n          scroll.refresh()\r\n\r\n          if (this.readyForChange === false) {\r\n            scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n          }\r\n        }, 1000)\r\n      })\r\n      this.lyricChanged = false\r\n    }\r\n  },\r\n  watch: {\r\n    'activeIndex' (val) {\r\n      if (this.lineData.length > 0 && this.readyForChange === false) {\r\n        let scrollDistance = this.lineData[val].center - this.boxHeight / 2\r\n        scroll.scrollTo(0, -scrollDistance, 1000)\r\n      }\r\n    },\r\n    'dataLoading' (val) {\r\n      if (!val) {\r\n        this.lyricLoading = true\r\n        this.lyricChanged = true\r\n        this.lineData = []\r\n        this.willActiveIndex = null\r\n        this.requestLyric(() => {\r\n          this.lyricLoading = false\r\n          this.$nextTick(() => {\r\n            if (this.timerRefresh) {\r\n              clearTimeout(this.timerRefresh)\r\n              this.tiemrretimerRefresh = null\r\n            }\r\n\r\n            this.timerRefresh = setTimeout(() => {\r\n              this.updateLineData()\r\n\r\n              scroll.refresh()\r\n\r\n              if (this.readyForChange === false) {\r\n                scroll.scrollTo(0, -(this.lineData[this.activeIndex].center - this.boxHeight / 2), 1000)\r\n              }\r\n              this.timerRefresh = null\r\n            }, 1000)\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n  .lyric-page {\r\n    display: flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    flex-direction: column;\r\n    position: relative;\r\n    .volume-area {\r\n      margin: 15px 25px;\r\n      display: flex;\r\n      align-items: center;\r\n      .icon-volume {\r\n        color: rgba(#aaa, 0.8);\r\n      }\r\n      .volume-box {\r\n        flex: 1;\r\n        height: 17px;\r\n        margin: 0 20px;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .volume-bar {\r\n        width: 100%;\r\n        height: 2px;\r\n        border-radius: 2px;\r\n        background: rgba($color: #eee, $alpha: 0.1);\r\n        position: relative;\r\n        .volume {\r\n          border-radius: 2px;\r\n          height: 2px;\r\n          position: absolute;\r\n          background: rgba(#aaa, 0.8);\r\n          .volume-button {\r\n            display: inline-block;\r\n            width: 8px;\r\n            height: 8px;\r\n            border-radius: 50%;\r\n            background: #eee;\r\n            position: absolute;\r\n            right: -5px;\r\n            top: -3px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .lyric-cursor {\r\n      position: absolute;\r\n      width: 100vw;\r\n      height: 25px;\r\n      display: flex;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n      margin: auto;\r\n      box-sizing: border-box;\r\n      padding: 0 5px;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      z-index: 1;\r\n      .cursor-icon {\r\n        border-radius: 3px;\r\n        border-width: 8px 8px 8px 13px;\r\n        border-color: transparent transparent transparent #ccc;\r\n        border-style: solid;\r\n      }\r\n      .cursor-line {\r\n        border: none;\r\n        background-color: rgba(#ccc, 0.8);\r\n        flex: 1;\r\n        height: 1px;\r\n        transform: scaleY(0.5);\r\n        margin: 0 5px;\r\n      }\r\n      .cursor-time {\r\n        font-size: 12px;\r\n        color: #eee;\r\n      }\r\n    }\r\n    .lyric-area {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      color: #aaa;\r\n      text-align: center;\r\n      position: relative;\r\n      .lyric-touch {\r\n        height: 100%;\r\n        overflow: hidden;\r\n        padding: 0 30px;\r\n      }\r\n      .lyric-content {\r\n        overflow: hidden;\r\n        padding: 50% 0;\r\n      }\r\n      .lyric-line {\r\n        margin: 20px 0;\r\n        word-break: break-word;\r\n      }\r\n      .lyric-loading,\r\n      .pure-music {\r\n        color: #eee;\r\n        display: flex;\r\n        height: 100%;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/lyric.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lyric-page\"},[_c('div',{staticClass:\"volume-area\"},[_c('span',{staticClass:\"iconfont icon-volume\"}),_vm._v(\" \"),_c('v-touch',{staticClass:\"volume-box\",on:{\"tap\":_vm.changeVolumeHandler,\"pan\":_vm.changeVolumeHandler}},[_c('div',{ref:\"volume\",staticClass:\"volume-bar\"},[_c('div',{staticClass:\"volume\",style:({width: _vm.volume * 100 + '%'})},[_c('div',{staticClass:\"volume-button\"})])])])],1),_vm._v(\" \"),_c('div',{staticClass:\"lyric-area\"},[(_vm.lyricArray.length > 1)?_c('v-touch',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.readyForChange),expression:\"readyForChange\"}],staticClass:\"lyric-cursor\",on:{\"tap\":_vm.lyricChanger}},[_c('span',{staticClass:\"cursor-icon\"}),_vm._v(\" \"),_c('hr',{staticClass:\"cursor-line\"}),_vm._v(\" \"),_c('span',{staticClass:\"cursor-time\"},[_vm._v(_vm._s(_vm.willActiveTime))])]):_vm._e(),_vm._v(\" \"),_c('v-touch',{ref:\"lyricArea\",staticClass:\"lyric-touch\",on:{\"tap\":_vm.togglePage,\"pan\":_vm.panHandler}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.lyricLoading && _vm.lyricArray.length > 1),expression:\"!lyricLoading && lyricArray.length > 1\"}],staticClass:\"lyric-box\"},[_c('div',{staticClass:\"lyric-content\",style:({padding: _vm.lyricArray.length > 1 ? _vm.boxHeight / 2 + 'px 0' : 0})},_vm._l((_vm.lyricArray),function(item,index){return _c('div',{key:'lyricI'+index,ref:\"line\",refInFor:true,staticClass:\"lyric-line\",style:({color: _vm.activeIndex === index ? '#fff' : _vm.willActiveIndex === index ? '#eee':''})},[_c('p',{staticClass:\"lyric-origin\",domProps:{\"innerHTML\":_vm._s(item.text)}}),_vm._v(\" \"),(item.trans)?_c('p',{staticClass:\"lyric-trans\",domProps:{\"innerHTML\":_vm._s(item.trans)}}):_vm._e()])}))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lyricLoading),expression:\"lyricLoading\"}],staticClass:\"lyric-loading\"},[_c('span',[_vm._v(\"歌词加载中...\")])]),_vm._v(\" \"),(!_vm.lyricLoading && _vm.lyricArray.length === 1)?_c('div',{staticClass:\"pure-music\"},[_c('span',[_vm._v(_vm._s(_vm.lyricArray[0] ? _vm.lyricArray[0].text : ''))])]):_vm._e()])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-84bbd64c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/lyric.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-84bbd64c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./lyric.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lyric.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./lyric.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-84bbd64c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./lyric.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-84bbd64c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/lyric.vue\n// module id = null\n// module chunks = ","<template>\r\n<transition name=\"fade\">\r\n<div class=\"player-page\">\r\n  <div\r\n    class=\"page-bg\"\r\n    :style=\"{backgroundImage: 'url('+pageBg+')'}\"\r\n  >\r\n\r\n  </div>\r\n  <div class=\"player-header\">\r\n    <v-touch\r\n      @tap=\"$router.go(-1)\"\r\n      class=\"back\"\r\n    ></v-touch>\r\n    <div ref=\"firstTitle\" class=\"header-title\">\r\n      <div class=\"first-title-box\">\r\n        <p class=\"first-title-content\">{{currentSong.songname}}</p>\r\n      </div>\r\n      <div class=\"sub-title\">{{currentSong.singer}}</div>\r\n    </div>\r\n    <span class=\"share iconfont icon-share\">\r\n    </span>\r\n  </div>\r\n  <div class=\"player-main\">\r\n    <transition name='fast-fade'>\r\n      <keep-alive>\r\n        <div\r\n          :is=\"showing\"\r\n          @togglepage=\"togglePage\"\r\n        >\r\n        </div>\r\n      </keep-alive>\r\n    </transition>\r\n  </div>\r\n  <div class=\"player-footer\">\r\n    <!-- 播放进度 -->\r\n    <div class=\"progress-area\">\r\n      <span class=\"current-time\">{{currentTimeStr}}</span>\r\n      <v-touch\r\n        tag=\"div\"\r\n        class=\"progress-can-touch\"\r\n        @tap=\"changeProgressTap\"\r\n        @pan=\"changeProgressPan\"\r\n      >\r\n        <div\r\n          ref=\"progress\"\r\n          class=\"progress-bar\"\r\n        >\r\n          <div :style=\"{width: loadProgress}\" class=\"load-progress\">\r\n          </div>\r\n          <div :style=\"{width: progressWidth}\" class=\"progress\">\r\n            <span class=\"progress-icon\" :class=\"{loading: dataLoading}\"></span>\r\n          </div>\r\n        </div>\r\n      </v-touch>\r\n      <span class=\"duration\">{{durationStr}}</span>\r\n    </div>\r\n    <!-- 控制按钮 -->\r\n    <div class=\"control-area\">\r\n      <v-touch\r\n        class=\"loop-type iconfont\"\r\n        :class=\"loopTypeClass\"\r\n        @tap=\"toggleLoopType\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"prev iconfont icon-prev\"\r\n        @tap=\"changeSong({type:'prev'})\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"play iconfont icon-play-fill\"\r\n        :class=\"running ? 'icon-pause' : 'icon-play-fill'\"\r\n        @tap=\"changePlayState('toggle')\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"next iconfont icon-next\"\r\n        @tap=\"changeSong({type:'next'})\"\r\n        v-touch-light\r\n      ></v-touch>\r\n      <v-touch\r\n        class=\"show-playlist iconfont icon-list\"\r\n        v-touch-light\r\n        @tap=\"playlistOn\"\r\n      ></v-touch>\r\n    </div>\r\n  </div>\r\n  <playlist\r\n    :showPlaylist=\"showPlaylist\"\r\n    @close=\"showPlaylist=false\"\r\n  >\r\n  </playlist>\r\n</div>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nimport {mapState, mapGetters, mapMutations, mapActions} from 'vuex'\r\nimport {formatTime} from '@/utils'\r\n\r\nimport cd from './cd'\r\nimport lyric from './lyric'\r\nimport playlist from '#/overlay/playlist'\r\nexport default {\r\n  components: {\r\n    cd,\r\n    lyric,\r\n    playlist\r\n  },\r\n  data () {\r\n    return {\r\n      showPlaylist: false,\r\n      pageBg: '',\r\n      showing: 'cd',\r\n      title: '',\r\n      timeSetting: null,\r\n      progressBarWidth: '',\r\n      progressBarOffset: ''\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('player', ['running', 'playlist', 'currentSong', 'duration', 'currentTime', 'loadedTime', 'loopType', 'dataLoading']),\r\n    ...mapGetters('player', ['progress']),\r\n    durationStr () {\r\n      return formatTime(this.duration)\r\n    },\r\n    currentTimeStr () {\r\n      if (this.timeSetting !== null) {\r\n        return formatTime(this.timeSetting)\r\n      } else {\r\n        return formatTime(this.currentTime)\r\n      }\r\n    },\r\n    progressWidth () {\r\n      if (this.timeSetting !== null) {\r\n        return this.timeSetting / this.duration * 100 + '%'\r\n      } else {\r\n        return this.progress * 100 + '%'\r\n      }\r\n    },\r\n    loadProgress () {\r\n      if (this.duration === 0) {\r\n        return 0\r\n      }\r\n      return this.loadedTime / this.duration * 100 + '%'\r\n    },\r\n    loopTypeClass () {\r\n      switch (this.loopType) {\r\n        case 'proper':\r\n          return 'icon-circle'\r\n        case 'single':\r\n          return 'icon-single'\r\n        case 'random':\r\n          return 'icon-random'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('player', ['setCurrentTime', 'toggleLoopType', 'changePlayState']),\r\n    ...mapActions('player', ['changeSong']),\r\n    // 滚动条来回滚动\r\n    scrollRound (scroll, end) {\r\n      if (scroll.maxScrollX < -30) {\r\n        setTimeout(() => {\r\n          scroll.scrollTo(end, 0, scroll.maxScrollX / -30 * 1000, {style: 'cubic-bezier(0, 0, 1, 1)'})\r\n        }, 2000)\r\n      }\r\n    },\r\n    togglePage () {\r\n      if (this.showing === 'cd') {\r\n        this.showing = 'lyric'\r\n      } else if (this.showing === 'lyric') {\r\n        this.showing = 'cd'\r\n      }\r\n    },\r\n    playlistOn () {\r\n      this.showPlaylist = true\r\n    },\r\n    changeProgressPan (e) {\r\n      let time = (e.center.x - this.progressBarOffset) / this.progressBarWidth * this.duration\r\n      this.timeSetting = time < 0 ? 0 : time > this.duration ? this.duration : time\r\n      if (e.isFinal) {\r\n        this.setCurrentTime(this.timeSetting)\r\n        setTimeout(() => {\r\n          this.timeSetting = null\r\n        }, 100)\r\n      }\r\n    },\r\n    changeProgressTap (e) {\r\n      let time = (e.center.x - this.progressBarOffset) / this.progressBarWidth * this.duration\r\n      this.setCurrentTime(time)\r\n    }\r\n  },\r\n  mounted () {\r\n    setTimeout(() => {\r\n      let img = new Image()\r\n      img.src = this.currentSong.albumcover\r\n      img.onload = () => {\r\n        this.pageBg = img.src\r\n        img = null\r\n      }\r\n    }, 1000)\r\n\r\n    let scroll = this.title = new window.IScroll(this.$refs.firstTitle, {\r\n      scrollX: true,\r\n      scrollY: false,\r\n      bounce: false,\r\n      click: false,\r\n      disableMouse: true,\r\n      disablePointer: true,\r\n      disableTouch: true,\r\n      bounceEasing: {\r\n        style: 'cubic-bezier(0,0,1,1)'\r\n      }\r\n    })\r\n\r\n    scroll.on('scrollEnd', () => {\r\n      if (scroll.maxScrollX === scroll.x) {\r\n        this.scrollRound(scroll, 0)\r\n      } else if (scroll.x === 0) {\r\n        this.scrollRound(scroll, scroll.maxScrollX)\r\n      }\r\n    })\r\n\r\n    this.scrollRound(scroll, scroll.maxScrollX)\r\n\r\n    let progressRect = this.$refs.progress.getBoundingClientRect()\r\n    this.progressBarOffset = progressRect.x || progressRect.left\r\n    this.progressBarWidth = progressRect.width\r\n  },\r\n  activated () {\r\n    this.showing = 'cd'\r\n  },\r\n  watch: {\r\n    'playlist.length' (val) {\r\n      if (val === 0 && this.$route.path === '/player') {\r\n        this.$router.replace('/')\r\n      }\r\n    },\r\n    'currentSong.src' () {\r\n      this.title.scrollTo(0, 0, 0)\r\n      this.$nextTick(() => {\r\n        setTimeout(() => {\r\n          this.title.refresh()\r\n          this.scrollRound(this.title, this.title.maxScrollX)\r\n        }, 1000)\r\n      })\r\n\r\n      setTimeout(() => {\r\n        let img = new Image()\r\n        img.src = this.currentSong.albumcover\r\n        img.onload = () => {\r\n          this.pageBg = img.src\r\n          img = null\r\n        }\r\n      }, 1000)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/style/scss.config.scss';\r\n.player-page {\r\n  box-sizing: border-box;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  padding-top: 50px;\r\n  flex: 1;\r\n\r\n  .page-bg {\r\n    background-color: #545454;\r\n    position: fixed;\r\n    width: 100vw;\r\n    height: 100vh;\r\n    top: 0;\r\n    left: 0;\r\n    filter: blur(30px) brightness(50%);\r\n    transform: scale3d(1.5, 1.5, 1);\r\n    transition: background 2s;\r\n  }\r\n  .player-header {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    height: 50px;\r\n    width: 100vw;\r\n    display: flex;\r\n    align-items: center;\r\n    color: white;\r\n    .back {\r\n      width: 25 / $base + rem;\r\n      height: 25 / $base + rem;\r\n      background: url('~@/components/common/img/ow.png') no-repeat center / 100%;\r\n      margin: 0 20px;\r\n    }\r\n    .header-title {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-around;\r\n      overflow: hidden;\r\n      .first-title-box {\r\n        align-self: flex-start;\r\n        .first-title-content {\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n      .sub-title {\r\n        font-size: 12px;\r\n        color: #aaa;\r\n      }\r\n    }\r\n    .share {\r\n      font-size: 25px;\r\n      margin: 0 20px;\r\n    }\r\n  }\r\n  .player-main {\r\n    overflow: hidden;\r\n    position: relative;\r\n    flex: 1;\r\n  }\r\n  .player-footer {\r\n    position: relative;\r\n    .progress-area {\r\n      display: flex;\r\n      margin: 15px;\r\n      justify-content: space-around;\r\n      align-items: center;\r\n      .current-time,\r\n      .duration {\r\n        font-size: 12px;\r\n        font-size: 10px;\r\n        color: #eee;\r\n      }\r\n      .progress-can-touch {\r\n        margin: 0 15px;\r\n        flex: 1;\r\n        height: 14px;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n      .progress-bar {\r\n        width: 100%;\r\n        height: 3px;\r\n        background-color: rgba($color: white, $alpha: 0.1);\r\n        position: relative;\r\n        border-radius: 3px;\r\n      }\r\n      .load-progress {\r\n        border-radius: 3px;\r\n        height: 100%;\r\n        background-color: rgba(white, 0.3);\r\n        position: absolute;\r\n      }\r\n      .progress {\r\n        border-radius: 3px;\r\n        height: 100%;\r\n        background-color: $theme-color;\r\n        position: absolute;\r\n        .progress-icon {\r\n          position: absolute;\r\n          display: inline-block;\r\n          width: 3px;\r\n          height: 3px;\r\n          border: 5px solid white;\r\n          border-radius: 50%;\r\n          background: $theme-color;\r\n          right: -6.5px;\r\n          top: -6.5 + 1.5px;\r\n        }\r\n        .progress-icon.loading::after {\r\n          content: '';\r\n          position: absolute;\r\n          top: -5px;\r\n          left: -5px;\r\n          width: 13px;\r\n          height: 13px;\r\n          background: url('~@/components/common/img/loading.png') center / 100%;\r\n          animation: loading 2s linear infinite;\r\n        }\r\n      }\r\n    }\r\n    .control-area {\r\n      margin: 20px 10px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .loop-type,\r\n      .show-playlist {\r\n        font-size: 22px;\r\n        color: rgba(white, 0.6);\r\n      }\r\n      .prev,\r\n      .next {\r\n        color: rgba($color: #eee, $alpha: 0.8);\r\n        font-size: 28px;\r\n      }\r\n      .play {\r\n        color: rgba(#eee, 0.9);\r\n        font-size: 50px;\r\n        margin: 0 -15px;\r\n        font-weight: 100;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Player/Player.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"player-page\"},[_c('div',{staticClass:\"page-bg\",style:({backgroundImage: 'url('+_vm.pageBg+')'})}),_vm._v(\" \"),_c('div',{staticClass:\"player-header\"},[_c('v-touch',{staticClass:\"back\",on:{\"tap\":function($event){_vm.$router.go(-1)}}}),_vm._v(\" \"),_c('div',{ref:\"firstTitle\",staticClass:\"header-title\"},[_c('div',{staticClass:\"first-title-box\"},[_c('p',{staticClass:\"first-title-content\"},[_vm._v(_vm._s(_vm.currentSong.songname))])]),_vm._v(\" \"),_c('div',{staticClass:\"sub-title\"},[_vm._v(_vm._s(_vm.currentSong.singer))])]),_vm._v(\" \"),_c('span',{staticClass:\"share iconfont icon-share\"})],1),_vm._v(\" \"),_c('div',{staticClass:\"player-main\"},[_c('transition',{attrs:{\"name\":\"fast-fade\"}},[_c('keep-alive',[_c(_vm.showing,{tag:\"div\",on:{\"togglepage\":_vm.togglePage}})])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"player-footer\"},[_c('div',{staticClass:\"progress-area\"},[_c('span',{staticClass:\"current-time\"},[_vm._v(_vm._s(_vm.currentTimeStr))]),_vm._v(\" \"),_c('v-touch',{staticClass:\"progress-can-touch\",attrs:{\"tag\":\"div\"},on:{\"tap\":_vm.changeProgressTap,\"pan\":_vm.changeProgressPan}},[_c('div',{ref:\"progress\",staticClass:\"progress-bar\"},[_c('div',{staticClass:\"load-progress\",style:({width: _vm.loadProgress})}),_vm._v(\" \"),_c('div',{staticClass:\"progress\",style:({width: _vm.progressWidth})},[_c('span',{staticClass:\"progress-icon\",class:{loading: _vm.dataLoading}})])])]),_vm._v(\" \"),_c('span',{staticClass:\"duration\"},[_vm._v(_vm._s(_vm.durationStr))])],1),_vm._v(\" \"),_c('div',{staticClass:\"control-area\"},[_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"loop-type iconfont\",class:_vm.loopTypeClass,on:{\"tap\":_vm.toggleLoopType}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"prev iconfont icon-prev\",on:{\"tap\":function($event){_vm.changeSong({type:'prev'})}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"play iconfont icon-play-fill\",class:_vm.running ? 'icon-pause' : 'icon-play-fill',on:{\"tap\":function($event){_vm.changePlayState('toggle')}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"next iconfont icon-next\",on:{\"tap\":function($event){_vm.changeSong({type:'next'})}}}),_vm._v(\" \"),_c('v-touch',{directives:[{name:\"touch-light\",rawName:\"v-touch-light\"}],staticClass:\"show-playlist iconfont icon-list\",on:{\"tap\":_vm.playlistOn}})],1)]),_vm._v(\" \"),_c('playlist',{attrs:{\"showPlaylist\":_vm.showPlaylist},on:{\"close\":function($event){_vm.showPlaylist=false}}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2ab50f56\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Player/Player.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2ab50f56\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Player.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Player.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2ab50f56\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Player.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2ab50f56\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Player/Player.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}